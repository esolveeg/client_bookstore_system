(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cafbc0a"],{"751d":function(t,e,a){"use strict";var s=a("aaa0"),n=a.n(s);n.a},aaa0:function(t,e,a){},ee63:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("Breadcrumbs",{attrs:{title:t.title,path:t.path,fregment:t.fregment}}),a("div",{staticClass:"col s12 mt-65"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col s12 m12 l12"},[a("h5",{staticClass:"form-title"},[a("i",{staticClass:"material-icons app-header-icon text-top"},[t._v("perm_identity")]),t._v(" "+t._s(t.$t(t.title,{fregment:t.fregment}))+" ")]),a("div",{staticClass:"card animated  fadeInLeft "},[a("div",{staticClass:"card-content"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.submitted()}}},[t.validationError?a("div",{staticClass:"card-alert danger card"},[a("div",{staticClass:"card-content"},[a("p",[a("i",{staticClass:"material-icons"},[t._v("error")]),t._v(t._s(t.validationError)+" ")])])]):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("note")}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"note"}],staticClass:"materialize-textarea",attrs:{id:"note"},domProps:{value:t.note},on:{input:function(e){e.target.composing||(t.note=e.target.value)}}}),a("label",{class:t.note?"active":"",attrs:{for:"note"}},[t._v(t._s(t.$t("note")))]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("note"))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("branch")}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.branch,expression:"branch"}],attrs:{id:"branch"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.branch=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"none"}},[t._v(t._s(t.$t("select_branch")))]),t._l(t.allBranches,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2),a("label",{class:t.branch?"active":"",attrs:{for:"branches"}},[t._v(t._s(t.$t("branches")))]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("branch"))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("value")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{id:"value",type:"text"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}),a("label",{class:t.value?"active":"",attrs:{for:"value"}},[t._v(t._s(t.$t("value")))]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("value"))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("label",{attrs:{for:"branches"}},[t._v(t._s(t.$t("date")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],attrs:{type:"date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("button",{staticClass:"btn create cyan waves-effect waves-light left",attrs:{type:"submit",name:"action",disabled:"disabled"}},[t._v(" "+t._s(t.$t("save"))+" "),a("i",{staticClass:"material-icons right"},[t._v("send")])])])])])])])])])])])],1)},n=[],i=(a("e25e"),a("9a2e")),r=a("85f2"),o=a("4d5c"),l=a.n(o),c=a("95b1"),d=a.n(c),u=a("f2b3"),v=a("c1df"),m=a.n(v),p=a("9530"),h=a.n(p);function f(){var t=Object(i["a"])(["\n          query {\n            allBranches {\n              name\n              id\n            }\n          }\n        "]);return f=function(){return t},t}var b=d.a.Validator,_={components:{Breadcrumbs:r["a"]},data:function(){var t=m()().startOf("day").format("YYYY-MM-DD");return{path:[{title:"expenses",route:"expenses.index"}],expense:{},branch:"",date:t,value:"",note:"",title:"create_expense",validationError:"",fregment:""}},validators:{note:function(t){return b.value(t).required().maxLength(250)},date:function(t){return b.value(t).required()},value:function(t){return b.value(t).required().digit().maxLength(5)}},apollo:{expense:function(){return{query:u["U"],variables:function(){return{id:parseInt(this.$route.params.id)}},result:function(t){var e=t.data.expense;this.branch=e.branch.id,this.note=e.note,this.date=e.date,this.value=e.value,this.title="edit"}}},allBranches:function(){return{query:h()(f())}}},watch:{"validation.errors":function(){var t=document.querySelector(".input-field button");this.validation.errors.length>0?t.setAttribute("disabled","disabled"):this.expense?t.removeAttribute("disabled"):this.validation.touchedRecords.length>1&&t.removeAttribute("disabled")}},methods:{submitted:function(){this.expense?this.updateExpense():this.createExpense()},loadSelects:function(){var t=document.querySelectorAll("select");setTimeout((function(){l.a.FormSelect.init(t,{})}),3e3)},updateExpense:function(){var t=this;this.$apollo.mutate({mutation:u["mb"],variables:{note:this.note,branch:this.branch,date:this.date,id:parseInt(this.$route.params.id),value:this.value}}).then((function(){l.a.toast({html:"".concat(t.$t("updated_successfully",{name:t.$t("expense")})),classes:"success toast",displayLength:2e3}),t.expense.note=t.note,t.expense.value=t.value,t.expense.branch.id=t.branch,t.$router.push({name:"expenses.index"})}))},createExpense:function(){var t=this;this.$apollo.mutate({mutation:u["k"],variables:{date:this.date,note:this.note,branch:this.branch,value:this.value}}).then((function(){l.a.toast({html:"".concat(t.$t("created_successfully",{name:t.$t("expense")})),classes:"success toast",displayLength:3e3}),t.$router.push({name:"expenses.index"})})).catch((function(){t.validationError=t.$t("name_unique")}))}},mounted:function(){this.loadSelects()}},x={name:"edit-add-roles",mixins:[_]},g=x,C=(a("751d"),a("2877")),w=Object(C["a"])(g,s,n,!1,null,"40812268",null);e["default"]=w.exports}}]);
//# sourceMappingURL=chunk-0cafbc0a.5ff5024a.js.map