(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-077e19a1"],{"311a":function(e,i,a){"use strict";var t=a("cdeb"),n=a.n(t);n.a},"4b91":function(e,i,a){"use strict";a.r(i);var t=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"row"},[a("Breadcrumbs",{attrs:{title:e.title,path:e.path,fregment:e.fregment}}),a("div",{staticClass:"col s12 mt-65"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col s12 m12 l12"},[a("h5",{staticClass:"form-title"},[a("i",{staticClass:"material-icons app-header-icon text-top"},[e._v("perm_identity")]),e._v(" "+e._s(e.$t(e.title,{fregment:e.fregment}))+" ")]),a("div",{staticClass:"card animated  fadeInLeft "},[a("div",{staticClass:"card-content"},[a("form",{on:{submit:function(i){return i.preventDefault(),e.submitted()}}},[e.validationError?a("div",{staticClass:"card-alert danger card"},[a("div",{staticClass:"card-content"},[a("p",[a("i",{staticClass:"material-icons"},[e._v("error")]),e._v(e._s(e.validationError)+" ")])])]):e._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:e.validation.hasError("name")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{id:"name",type:"text"},domProps:{value:e.name},on:{input:function(i){i.target.composing||(e.name=i.target.value)}}}),a("label",{class:e.name?"active":"",attrs:{for:"name"}},[e._v(e._s(e.$t("name")))]),a("div",{staticClass:"message"},[e._v(" "+e._s(e.validation.firstError("name"))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:e.validation.hasError("email")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{id:"email",type:"email"},domProps:{value:e.email},on:{input:function(i){i.target.composing||(e.email=i.target.value)}}}),a("label",{class:e.email?"active":"",attrs:{for:"email"}},[e._v(e._s(e.$t("email")))]),a("div",{staticClass:"message"},[e._v(" "+e._s(e.validation.firstError("email"))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:e.validation.hasError("password")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",type:"password"},domProps:{value:e.password},on:{input:function(i){i.target.composing||(e.password=i.target.value)}}}),a("label",{attrs:{for:"password"}},[e._v(e._s(e.$t("password")))]),e.user?a("div",{staticClass:"message"},[e._v(" "+e._s(e.$t("password_note"))+" ")]):e._e(),a("div",{staticClass:"message"},[e._v(" "+e._s(e.validation.firstError("password"))+" ")])])]),e.user?e._e():a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:e.validation.hasError("passwordConfirmation")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.passwordConfirmation,expression:"passwordConfirmation"}],attrs:{id:"password_confirmation",type:"password"},domProps:{value:e.passwordConfirmation},on:{input:function(i){i.target.composing||(e.passwordConfirmation=i.target.value)}}}),a("label",{attrs:{for:"password_confirmation"}},[e._v(e._s(e.$t("password_confirmation")))]),a("div",{staticClass:"message"},[e._v(" "+e._s(e.validation.firstError("passwordConfirmation"))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:e.validation.hasError("roles")}},[e.rolesLoaded?a("select",{directives:[{name:"model",rawName:"v-model",value:e.roles,expression:"roles"}],attrs:{id:"roles",multiple:""},on:{change:function(i){var a=Array.prototype.filter.call(i.target.options,(function(e){return e.selected})).map((function(e){var i="_value"in e?e._value:e.value;return i}));e.roles=i.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"none"}},[e._v(e._s("Select role"))]),e._l(e.allRoles,(function(i){return a("option",{key:i.id,domProps:{value:i.slug}},[e._v(e._s(i.name))])}))],2):e._e(),a("label",{class:e.roles?"active":"",attrs:{for:"roles"}},[e._v(e._s(e.$t("roles")))]),a("div",{staticClass:"message"},[e._v(" "+e._s(e.validation.firstError("roles"))+" ")])])]),a("div",{staticClass:"row",class:e.isPos?"":"hide",attrs:{id:"employees_select"}},[a("div",{staticClass:"input-field col s12",class:{error:e.employeeErr}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.employee,expression:"employee"}],attrs:{id:"employee"},on:{change:function(i){var a=Array.prototype.filter.call(i.target.options,(function(e){return e.selected})).map((function(e){var i="_value"in e?e._value:e.value;return i}));e.employee=i.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"none"}},[e._v(e._s("Select employee"))]),e._l(e.allEmployees,(function(i){return a("option",{key:i.id,domProps:{value:i.id}},[e._v(e._s(i.name))])}))],2),a("label",{class:e.employee?"active":"",attrs:{for:"employee"}},[e._v(e._s(e.$t("employee")))]),e.employeeErr?a("div",{staticClass:"message"},[e._v(" "+e._s(e.$t("required"))+" ")]):e._e(),a("div",{staticClass:"message"},[e._v(" "+e._s(e.$t("employee_note"))+" "),a("router-link",{attrs:{to:{name:"employees.create"}}},[e._v(e._s(e.$t("add_employee")))])],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("button",{staticClass:"btn create cyan waves-effect waves-light left",attrs:{type:"submit",name:"action",disabled:"disabled"}},[e._v(" "+e._s(e.$t("save"))+" "),a("i",{staticClass:"material-icons right"},[e._v("send")])])])])])])])])])])])],1)},n=[],s=(a("4160"),a("c975"),a("b0c0"),a("e25e"),a("ac1f"),a("466d"),a("159b"),a("9a2e")),r=a("85f2"),l=a("4d5c"),o=a.n(l),d=a("95b1"),m=a.n(d),u=a("9530"),c=a.n(u);function v(){var e=Object(s["a"])(["\n          query {\n            allEmployees {\n              name\n              id\n            }\n          }\n        "]);return v=function(){return e},e}function p(){var e=Object(s["a"])(["\n          query {\n            allRoles {\n              name\n              slug\n            }\n          }\n        "]);return p=function(){return e},e}var f=m.a.Validator,k={name:"edit-add-users",components:{Breadcrumbs:r["a"]},data:function(){return{path:[{title:"users",route:"users.index"}],user:{},posRole:{},name:"",email:"",password:"",passwordConfirmation:"",allRoles:[],roles:[],isPos:!1,allEmployees:[],employee:null,employeeErr:!0,title:"create_user",validationError:"",rolesLoaded:!0,fregment:""}},validators:{email:function(e){return f.value(e).required().email()},name:function(e){return f.value(e).required().minLength(3)},roles:function(e){return f.value(e).required()},password:function(e){return f.value(e).required().minLength(6)},passwordConfirmation:function(e){return f.value(e).required().match(this.password)},employee:function(e){return f.value(e).required()}},apollo:{user:function(){return{query:a("fb42"),variables:function(){return{id:parseInt(this.$route.params.id)}}}},allRoles:function(){return{query:c()(p())}},allEmployees:function(){return{query:c()(v())}}},watch:{employee:{handler:function(e){var i=document.querySelector(".input-field button");e?this.employeeErr=!1:(i.removeAttribute("disabled"),this.employeeErr=!0)}},user:{handler:function(e){if(e){this.name=e.name,this.email=e.email,this.title="edit",this.fregment=e.name;var i=[];if(e.roles.forEach((function(e){i.push(e.slug)})),e.employee){this.isPos=!0,this.employee=e.employee.id;var a=document.querySelector(".input-field button");a.removeAttribute("disabled")}this.roles=i,this.rolesLoaded=!0}}},"validation.errors":function(){var e=document.querySelector(".input-field button");this.validation.errors.length>0?e.setAttribute("disabled","disabled"):this.user?e.removeAttribute("disabled"):this.validation.touchedRecords.length>4&&e.removeAttribute("disabled")},roles:{handler:function(e){if(e){var i=document.querySelector(".input-field button");-1!=e.indexOf("pos")?(this.employee?setTimeout((function(){i.removeAttribute("disabled")}),1100):setTimeout((function(){i.setAttribute("disabled","disabled")}),1e3),this.isPos=!0):(this.isPos=!1,setTimeout((function(){i.removeAttribute("disabled")}),1100))}}}},methods:{submitted:function(){this.user?this.updateUser():this.createUser()},loadSelects:function(){var e=document.querySelectorAll("select");setTimeout((function(){o.a.FormSelect.init(e,{})}),3e3)},updateUser:function(){var e=this;this.$apollo.mutate({mutation:a("bf7d"),variables:{name:this.name,email:this.email,id:parseInt(this.$route.params.id),password:this.password,password_confirmation:this.passwordConfirmation,employee:parseInt(this.employee),roles:this.roles}}).then((function(i){o.a.toast({html:"".concat(e.$t("updated_successfully",{name:i.data.updateUser.name})),classes:"success toast",displayLength:2e3}),e.user.name=e.name,e.user.email=e.email,e.user.employee=e.employee,e.$router.push({name:"users.index"})})).catch((function(){e.validationError=e.$t("email_unique")}))},createUser:function(){var e=this;this.$apollo.mutate({mutation:a("9a6d"),variables:{name:this.name,email:this.email,password:this.password,password_confirmation:this.passwordConfirmation,employee:parseInt(this.employee),roles:this.roles}}).then((function(i){o.a.toast({html:"".concat(e.$t("created_successfully",{name:i.data.createUser.name})),classes:"success toast",displayLength:3e3}),e.$router.push({name:"users.index"})})).catch((function(){e.validationError=e.$t("email_unique")}))}},mounted:function(){this.loadSelects()}},y=k,b=(a("311a"),a("2877")),h=Object(b["a"])(y,t,n,!1,null,"5372e652",null);i["default"]=h.exports},bf7d:function(e,i){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"password"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"employee"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"roles"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"ObjectField",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}},{kind:"ObjectField",name:{kind:"Name",value:"employee"},value:{kind:"Variable",name:{kind:"Name",value:"employee"}}},{kind:"ObjectField",name:{kind:"Name",value:"password"},value:{kind:"Variable",name:{kind:"Name",value:"password"}}},{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"roles"},value:{kind:"Variable",name:{kind:"Name",value:"roles"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:276}};a.loc.source={body:"mutation(\n    $name:String!\n    $email:String!\n    $password:String\n    $employee:Int\n    $id:ID!\n    $roles:[String!]!\n) {\n updateUser(input:{\n  name:$name,\n  email:$email,\n  employee:$employee\n  password:$password,\n  id:$id\n  roles:$roles\n}){\n  name\n  email\n  created_at\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function t(e,i){if("FragmentSpread"===e.kind)i.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&i.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,i)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,i)})),e.definitions&&e.definitions.forEach((function(e){t(e,i)}))}var n={};(function(){a.definitions.forEach((function(e){if(e.name){var i=new Set;t(e,i),n[e.name.value]=i}}))})(),e.exports=a},c975:function(e,i,a){"use strict";var t=a("23e7"),n=a("4d64").indexOf,s=a("b301"),r=[].indexOf,l=!!r&&1/[1].indexOf(1,-0)<0,o=s("indexOf");t({target:"Array",proto:!0,forced:l||o},{indexOf:function(e){return l?r.apply(this,arguments)||0:n(this,e,arguments.length>1?arguments[1]:void 0)}})},cdeb:function(e,i,a){},fb42:function(e,i){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"employee"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:148}};a.loc.source={body:"query($id:ID!) {\n  user(id:$id) {\n    name\n    email\n    roles {\n      slug\n      id\n      name\n    }\n    employee{\n      id\n      name\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function t(e,i){if("FragmentSpread"===e.kind)i.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&i.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,i)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,i)})),e.definitions&&e.definitions.forEach((function(e){t(e,i)}))}var n={};(function(){a.definitions.forEach((function(e){if(e.name){var i=new Set;t(e,i),n[e.name.value]=i}}))})(),e.exports=a}}]);
//# sourceMappingURL=chunk-077e19a1.b1b5753a.js.map