(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd7d8212"],{"3e2b":function(t,e,a){"use strict";var s=a("65f4"),i=a.n(s);i.a},"65f4":function(t,e,a){},"7be7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("Breadcrumbs",{attrs:{title:t.title,path:t.path,fregment:t.fregment}}),a("div",{staticClass:"col s12 mt-65"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col s12 m12 l12"},[a("h5",{staticClass:"form-title"},[a("i",{staticClass:"material-icons app-header-icon text-top"},[t._v("perm_identity")]),t._v(" "+t._s(t.$t(t.title,{fregment:t.fregment}))+" ")]),a("div",{staticClass:"card animated  fadeInLeft "},[a("div",{staticClass:"card-content"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.submitted()}}},[t.validationError?a("div",{staticClass:"card-alert danger card"},[a("div",{staticClass:"card-content"},[a("p",[a("i",{staticClass:"material-icons"},[t._v("error")]),t._v(t._s(t.validationError)+" ")])])]):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("name")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"name",type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),a("label",{class:t.name?"active":"",attrs:{for:"name"}},[t._v(t._s(t.$t("name")))]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("name"))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("email")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),a("label",{class:t.email?"active":"",attrs:{for:"email"}},[t._v(t._s(t.$t("email")))]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("email"))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("phone")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{id:"phone",type:"text"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}}),a("label",{class:t.phone?"active":"",attrs:{for:"phone"}},[t._v(t._s(t.$t("phone")))]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("phone"))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("intersts")}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.intersts,expression:"intersts"}],staticClass:"materialize-textarea",attrs:{id:"intersts"},domProps:{value:t.intersts},on:{input:function(e){e.target.composing||(t.intersts=e.target.value)}}}),a("label",{class:t.intersts?"active":"",attrs:{for:"intersts"}},[t._v(t._s(t.$t("intersts")))]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("intersts"))+" ")])])]),t.isPos?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("branch")}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.branch,expression:"branch"}],attrs:{id:"branch"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.branch=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"none"}},[t._v(t._s(t.$t("select_branch")))]),t._l(t.allBranches,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2),a("label",{class:t.branchs?"active":"",attrs:{for:"branch"}},[t._v(t._s(t.$t("branches")))]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("users"))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("button",{staticClass:"btn create cyan waves-effect waves-light left",attrs:{type:"submit",name:"action",disabled:"disabled"}},[t._v(" "+t._s(t.$t("save"))+" "),a("i",{staticClass:"material-icons right"},[t._v("send")])])])])])])])])])])])],1)},i=[],r=(a("b0c0"),a("e25e"),a("85f2")),n=a("4d5c"),o=a.n(n),l=a("95b1"),c=a.n(l),u=a("f2b3"),d=c.a.Validator,m={components:{Breadcrumbs:r["a"]},data:function(){return{path:[{title:"customers",route:"customers.index"}],customer:{},name:"",email:"",intersts:"",phone:"",allBranches:[],title:"create_customer",validationError:"",fregment:""}},validators:{name:function(t){return d.value(t).required().maxLength(100)},email:function(t){return d.value(t).maxLength(200).required().email()},intersts:function(t){return d.value(t).maxLength(250)},phone:function(t){return d.value(t).maxLength(16)},bracnch:function(t){return d.value(t).required()}},apollo:{customer:function(){return{query:u["s"],variables:function(){return{id:parseInt(this.$route.params.id)}},result:function(t){var e=t.data.customer;this.name=e.name,this.email=e.email,this.intersts=e.intersts,this.branch=e.branch.id,this.phone=e.phone,this.title="edit"}}},allBranches:function(){return{query:u["a"]}}},watch:{"validation.errors":function(){var t=document.querySelector(".input-field button");this.validation.errors.length>0?t.setAttribute("disabled","disabled"):this.customer?t.removeAttribute("disabled"):this.validation.touchedRecords.length>1&&t.removeAttribute("disabled")}},store:{isPos:"isPos",branch:"branch_id"},methods:{loadSelects:function(){var t=document.querySelectorAll("select");setTimeout((function(){o.a.FormSelect.init(t,{})}),2e3)},submitted:function(){this.customer?this.updateCustomer():this.createCustomer()},updateCustomer:function(){var t=this;this.$apollo.mutate({mutation:u["jb"],variables:{id:parseInt(this.$route.params.id),name:this.name,email:this.email,intersts:this.intersts,branch:this.branch,phone:this.phone}}).then((function(e){o.a.toast({html:"".concat(t.$t("updated_successfully",{name:t.$t(e.data.updateCustomer.name)})),classes:"success toast",displayLength:2e3}),t.$router.push({name:"customers.index"})})).catch((function(t){console.log(t)}))},createCustomer:function(){var t=this;this.$apollo.mutate({mutation:u["g"],variables:{name:this.name,email:this.email,intersts:this.intersts,branch:this.branch,phone:this.phone}}).then((function(e){o.a.toast({html:"".concat(t.$t("created_successfully",{name:t.$t(e.data.createCustomer.name)})),classes:"success toast",displayLength:3e3}),t.id=e.data.createCustomer.id,t.$router.push({name:"customers.index"})})).catch((function(){t.validationError=t.$t("name_unique")}))}},mounted:function(){this.loadSelects()}},v={name:"edit-add-Customers",mixins:[m]},h=v,p=(a("3e2b"),a("2877")),f=Object(p["a"])(h,s,i,!1,null,"6b57d080",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-fd7d8212.8c32d651.js.map