(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52218c7c"],{"205b":function(t,e,a){},"3fb6":function(t,e,a){"use strict";var s=a("205b"),i=a.n(s);i.a},"4adb":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("Breadcrumbs",{attrs:{title:t.title,path:t.path,fregment:t.fregment}}),a("div",{staticClass:"col s12 mt-65"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col s12 m12 l12"},[a("h5",{staticClass:"form-title"},[a("i",{staticClass:"material-icons app-header-icon text-top"},[t._v("perm_identity")]),t._v(" "+t._s(t.$t(t.title,{fregment:t.fregment}))+" ")]),a("div",{staticClass:"card animated  fadeInLeft "},[a("div",{staticClass:"card-content"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.submitted()}}},[t.validationError?a("div",{staticClass:"card-alert danger card"},[a("div",{staticClass:"card-content"},[a("p",[a("i",{staticClass:"material-icons"},[t._v("error")]),t._v(t._s(t.validationError)+" ")])])]):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("isbn")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isbn,expression:"isbn"}],attrs:{autocomplete:"off",autofocus:"",id:"isbn",type:"text"},domProps:{value:t.isbn},on:{input:function(e){e.target.composing||(t.isbn=e.target.value)}}}),a("label",{class:t.isbn?"active":"",attrs:{for:"isbn"}},[t._v(t._s(t.$t("isbn")))]),a("div",{staticClass:"message"},[t.isFound?a("span",{staticClass:"success-text"},[t._v(t._s(t.$t("product_found",{name:t.name})))]):t._e(),t._v(" "+t._s(t.validation.firstError("isbn"))+" ")])])]),t.isFound?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("name")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"name",type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),a("label",{class:t.name?"active":"",attrs:{for:"name"}},[t._v(t._s(t.$t("name")))]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("name"))+" ")])])]),t.isFound?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("purchased_price")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.purchased_price,expression:"purchased_price"}],attrs:{id:"purchased_price",type:"number"},domProps:{value:t.purchased_price},on:{input:function(e){e.target.composing||(t.purchased_price=e.target.value)}}}),a("label",{class:t.purchased_price?"active":"",attrs:{for:"purchased_price"}},[t._v(t._s(t.$t("purchased_price")))]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("purchased_price"))+" ")])])]),t.isFound?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("price")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],attrs:{id:"price",type:"number"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}}),a("label",{class:t.price?"active":"",attrs:{for:"price"}},[t._v(t._s(t.$t("price")))]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("price"))+" ")])])]),t.isPos?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("branch")}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.branch,expression:"branch"}],attrs:{id:"branch"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.branch=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"none"}},[t._v(t._s(t.$t("select_branch")))]),t._l(t.allBranches,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2),a("label",{class:t.branch?"active":"",attrs:{for:"branches"}},[t._v(t._s(t.$t("branches")))]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("branch"))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("qty")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"qty"}],attrs:{id:"qty",type:"number"},domProps:{value:t.qty},on:{input:function(e){e.target.composing||(t.qty=e.target.value)}}}),a("label",{class:t.qty?"active":"",attrs:{for:"qty"}},[t._v(t._s(t.$t("qty")))]),a("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("qty"))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("button",{staticClass:"btn create cyan waves-effect waves-light left",attrs:{type:"submit",name:"action",disabled:"disabled"}},[t._v(" "+t._s(t.$t("save"))+" "),a("i",{staticClass:"material-icons right"},[t._v("send")])])])])])])])])])])])],1)},i=[],r=(a("4de4"),a("b0c0"),a("e25e"),a("85f2")),n=a("4d5c"),c=a.n(n),o=a("95b1"),d=a.n(o),u=a("f2b3"),l=d.a.Validator,p={components:{Breadcrumbs:r["a"]},data:function(){return{path:[{title:"products",route:"products.index"}],product:{},name:"",id:"",branch:"",isFound:!1,isbn:"",price:"",purchased_price:"",qty:"",productQty:0,allProducts:[],title:"create_product",validationError:"",fregment:""}},validators:{name:function(t){return l.value(t).required().maxLength(250)},isbn:function(t){return l.value(t).required().maxLength(13)},price:function(t){return l.value(t).required().digit().maxLength(5)},purchased_price:function(t){return l.value(t).required().digit().maxLength(5)},qty:function(t){return l.value(t).required().digit().maxLength(5)}},apollo:{product:function(){return{query:u["ab"],variables:function(){return{id:parseInt(this.$route.params.id)}},result:function(t){var e=t.data.product;this.name=e.name,this.isbn=e.isbn,this.price=e.price,this.purchased_price=e.purchased_price,this.qty=e.qty,this.title="edit"}}},allProducts:function(){return{query:u["c"]}},allBranches:function(){return{query:u["a"]}}},watch:{"validation.errors":function(){var t=document.querySelector(".input-field button");this.validation.errors.length>0?t.setAttribute("disabled","disabled"):this.product?t.removeAttribute("disabled"):this.validation.touchedRecords.length>1&&t.removeAttribute("disabled")},isbn:function(){var t,e=this,a=this.allProducts.filter((function(t){return t.isbn==e.isbn?t:""}));a[0]?(t=a[0],this.name=t.name,this.price=t.price,this.id=t.id,this.productQty=t.qty,this.purchased_price=t.purchased_price,this.isFound=!0):this.isFound=!1}},methods:{loadSelects:function(){var t=document.querySelectorAll("select");setTimeout((function(){c.a.FormSelect.init(t,{})}),2e3)},submitted:function(){this.product?this.updateProduct():this.isFound?this.updateStock(this.id,parseInt(this.qty)+parseInt(this.productQty),!0):this.createProduct()},updateProduct:function(){var t=this;this.$apollo.mutate({mutation:u["qb"],variables:{id:parseInt(this.$route.params.id),name:this.name,isbn:this.isbn,price:this.price,purchased_price:this.purchased_price}}).then((function(e){c.a.toast({html:"".concat(t.$t("updated_successfully",{name:t.$t(e.data.updateProduct.name)})),classes:"success toast",displayLength:2e3}),t.$router.push({name:"products.index"})})),this.updateStock(parseInt(this.$route.params.id))},createProduct:function(){var t=this;this.$apollo.mutate({mutation:u["o"],variables:{name:this.name,isbn:this.isbn,price:this.price,purchased_price:this.purchased_price}}).then((function(e){c.a.toast({html:"".concat(t.$t("created_successfully",{name:t.$t(e.data.createProduct.name)})),classes:"success toast",displayLength:3e3}),t.id=e.data.createProduct.id,t.$router.push({name:"products.index"})})).catch((function(){t.validationError=t.$t("name_unique")})),setTimeout((function(){t.updateStock(t.id)}),2e3)},updateStock:function(t,e,a){var s=this;e=e||this.qty,a=a||!1,this.$apollo.mutate({mutation:u["q"],variables:{product:t,branch:parseInt(this.branch),qty:e}}).then((function(){a&&(c.a.toast({html:"".concat(s.$t("updated_successfully",{name:s.$t(s.name)})),classes:"success toast",displayLength:2e3}),s.$router.push({name:"products.index"}))}))}},mounted:function(){this.loadSelects()}},v={name:"edit-add-Products",mixins:[p]},m=v,h=(a("3fb6"),a("2877")),f=Object(h["a"])(m,s,i,!1,null,"c5ef206c",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-52218c7c.b8796ad2.js.map