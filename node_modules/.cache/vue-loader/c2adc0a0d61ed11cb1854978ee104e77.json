{"remainingRequest":"/root/ahmed/vueJs/systemfinal/node_modules/vue-loader/lib/index.js??vue-loader-options!/root/ahmed/vueJs/systemfinal/src/views/transactions/Approve.vue?vue&type=script&lang=js&","dependencies":[{"path":"/root/ahmed/vueJs/systemfinal/src/views/transactions/Approve.vue","mtime":1592771460510},{"path":"/root/ahmed/vueJs/systemfinal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/ahmed/vueJs/systemfinal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/root/ahmed/vueJs/systemfinal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/ahmed/vueJs/systemfinal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBNIGZyb20gIm1hdGVyaWFsaXplLWNzcyI7CmltcG9ydCBCcmVhZGNydW1icyBmcm9tICJAL2NvbXBvbmVudHMvbGF5b3V0cy9CcmVhZGNydW1icy52dWUiOwppbXBvcnQgU2ltcGxlVnVlVmFsaWRhdGlvbiBmcm9tICJzaW1wbGUtdnVlLXZhbGlkYXRvciI7CmltcG9ydCB7CiAgdHJhbnNhY3Rpb25RdWVyeSwKICBhbGxQcm9kdWN0cywKICB1cGRhdGVUcmFuc2FjdGlvblByb2R1Y3QsCiAgdXBkYXRlVHJhbnNhY3Rpb24KfSBmcm9tICJAL2dyYXBocWwvcXVlcmllcy9xdWVyaWVzLmpzIjsKY29uc3QgVmFsaWRhdG9yID0gU2ltcGxlVnVlVmFsaWRhdGlvbi5WYWxpZGF0b3I7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYXBwcm92ZS10cmFuc2FjdGlvbnMiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0cmFuc2FjdGlvbjogIiIsCiAgICAgIGFsbFByb2R1Y3RzOiBbXSwKICAgICAgcHJvZHVjdDogIiIsCiAgICAgIHBhdGg6IFtdLAogICAgICBpc2JuOiAiIiwKICAgICAgcXR5SW5jcmVhc2VkOiBmYWxzZSwKICAgICAgY3VycmVudFByb2R1Y3RzOiBbXSwKICAgICAgcmVwb3J0UHJvZHVjdHM6IFtdLAogICAgICBub3RGb3VuZFByb2R1Y3RzOiBbXSwKICAgICAgcHJvZHVjdHNJZHM6IFtdLAogICAgICBub3RBcHByb3ZlZDogW10sCiAgICAgIGNoZWNrTWU6ICIiLAogICAgICBwcm9kdWN0QWRkZWQ6IGZhbHNlLAogICAgICBwcm9kdWN0QWxyZWFkeUFkZGVkOiBmYWxzZSwKICAgICAgZnJlZ21lbnQ6ICIiLAogICAgICB2YWxpZGF0aW9uRXJyb3I6ICIiLAogICAgICBxdHlzOiBbXSwKICAgICAgdGl0bGU6ICJhcHByb3ZlX3RyYW5zYWN0aW9uIiwKICAgICAgcHJvZHVjdHM6IFtdCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgQnJlYWRjcnVtYnMKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlbW92ZVByb2R1Y3QoaWQpIHsKICAgICAgdGhpcy5wcm9kdWN0cyA9IHRoaXMucHJvZHVjdHMuZmlsdGVyKHByb2R1Y3QgPT4gewogICAgICAgIHJldHVybiBwcm9kdWN0LmlkICE9PSBpZCA/IHByb2R1Y3QgOiAiIjsKICAgICAgfSk7CiAgICAgIHRoaXMucHJvZHVjdHNJZHMgPSB0aGlzLnByb2R1Y3RzSWRzLmZpbHRlcihwcm9kdWN0ID0+IHsKICAgICAgICByZXR1cm4gcHJvZHVjdC5pZCAhPT0gaWQgPyBwcm9kdWN0IDogIiI7CiAgICAgIH0pOwogICAgICB0aGlzLnJlcG9ydFByb2R1Y3RzID0gdGhpcy5yZXBvcnRQcm9kdWN0cy5maWx0ZXIocHJvZHVjdCA9PiB7CiAgICAgICAgcmV0dXJuIHByb2R1Y3QuaWQgIT09IGlkID8gcHJvZHVjdCA6ICIiOwogICAgICB9KTsKICAgICAgdGhpcy5ub3RGb3VuZFByb2R1Y3RzID0gdGhpcy5ub3RGb3VuZFByb2R1Y3RzLmZpbHRlcihwcm9kdWN0ID0+IHsKICAgICAgICByZXR1cm4gcHJvZHVjdC5pZCAhPT0gaWQgPyBwcm9kdWN0IDogIiI7CiAgICAgIH0pOwogICAgfSwKICAgIGFwcHJvdmUoKSB7CiAgICAgIGxldCBpc2JucyA9IFtdOwogICAgICBsZXQgdHJhbnNhY3Rpb25Jc2JucyA9IFtdOwogICAgICB0aGlzLnJlcG9ydFByb2R1Y3RzLmZvckVhY2gocHJvZHVjdCA9PiB7CiAgICAgICAgaXNibnMucHVzaChwcm9kdWN0LmlzYm4pOwogICAgICB9KTsKICAgICAgdGhpcy50cmFuc2FjdGlvbi5wcm9kdWN0cy5mb3JFYWNoKHByb2R1Y3QgPT4gewogICAgICAgIHRyYW5zYWN0aW9uSXNibnMucHVzaChwcm9kdWN0LmlzYm4pOwogICAgICB9KTsKICAgICAgbGV0IGludGVyc2VjdGlvbiA9IHRyYW5zYWN0aW9uSXNibnMuZmlsdGVyKGlzYm4gPT4gewogICAgICAgIHJldHVybiBpc2Jucy5pbmNsdWRlcyhpc2JuKSA/ICIiIDogaXNibjsKICAgICAgfSk7CiAgICAgIGlmIChpbnRlcnNlY3Rpb24ubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMubm90QXBwcm92ZWQgPSBpbnRlcnNlY3Rpb247CiAgICAgICAgbGV0IGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLm1vZGFsIik7CiAgICAgICAgbGV0IGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjYXBwcm92ZS1tb2RhbCIpOwogICAgICAgIE0uTW9kYWwuaW5pdChlbGVtcywge30pOwogICAgICAgIGxldCBpbnN0YW5jZSA9IE0uTW9kYWwuZ2V0SW5zdGFuY2UoZWxlbSk7CiAgICAgICAgaW5zdGFuY2Uub3BlbigpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXBkYXRlVHJhbnNhY3Rpb24oKTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZVRyYW5zYWN0aW9uKCkgewogICAgICB0aGlzLnByb2R1Y3RzLmZvckVhY2gocHJvZHVjdCA9PiB7CiAgICAgICAgdGhpcy5xdHlzLnB1c2gocHJvZHVjdC5xdHkpOwogICAgICB9KTsKICAgICAgdGhpcy4kYXBvbGxvCiAgICAgICAgLm11dGF0ZSh7CiAgICAgICAgICBtdXRhdGlvbjogdXBkYXRlVHJhbnNhY3Rpb25Qcm9kdWN0LAogICAgICAgICAgLy8gUGFyYW1ldGVycwogICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgIHRyYW5zYWN0aW9uOiBwYXJzZUludCh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpLAogICAgICAgICAgICBxdHlzOiB0aGlzLnF0eXMsCiAgICAgICAgICAgIGJyYW5jaDogdGhpcy50cmFuc2FjdGlvbi5icmFuY2guaWQsCiAgICAgICAgICAgIHByb2R1Y3RzOiB0aGlzLnByb2R1Y3RzSWRzCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRhcG9sbG8KICAgICAgICAgICAgLm11dGF0ZSh7CiAgICAgICAgICAgICAgbXV0YXRpb246IHVwZGF0ZVRyYW5zYWN0aW9uLAogICAgICAgICAgICAgIC8vIFBhcmFtZXRlcnMKICAgICAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgICAgIGlkOiBwYXJzZUludCh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpLAogICAgICAgICAgICAgICAgYnJhbmNoOiB0aGlzLnRyYW5zYWN0aW9uLmJyYW5jaC5pZCwKICAgICAgICAgICAgICAgIGFwcHJvdmVkOiB0cnVlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgTS50b2FzdCh7CiAgICAgICAgICAgICAgICBodG1sOiBgJHt0aGlzLiR0KCJ1cGRhdGVkX3N1Y2Nlc3NmdWxseSIsIHsKICAgICAgICAgICAgICAgICAgbmFtZTogInRyYW5zYWN0aW9uIgogICAgICAgICAgICAgICAgfSl9YCwKICAgICAgICAgICAgICAgIGNsYXNzZXM6ICJzdWNjZXNzIHRvYXN0IiwKICAgICAgICAgICAgICAgIGRpc3BsYXlMZW5ndGg6IDMwMDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJ0cmFuc2FjdGlvbnMuaW5kZXgiIH0pOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZSkKICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRpb25FcnJvciA9IHRoaXMuJHQoImJyYW5jaF9yZXF1aXJlZCIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgICBnZXRRdHkoaXNibikgewogICAgICBsZXQgcHJvZHVjdCA9IHRoaXMuYWxsUHJvZHVjdHMuZmlsdGVyKHByb2R1Y3QgPT4gewogICAgICAgIHJldHVybiBwcm9kdWN0LmlzYm4gPT0gaXNibiA/IHByb2R1Y3QgOiAiIjsKICAgICAgfSk7CiAgICAgIHJldHVybiBwcm9kdWN0WzBdLnF0eTsKICAgIH0sCiAgICBnZXROYW1lKGlzYm4pIHsKICAgICAgbGV0IHByb2R1Y3QgPSB0aGlzLmFsbFByb2R1Y3RzLmZpbHRlcihwcm9kdWN0ID0+IHsKICAgICAgICByZXR1cm4gcHJvZHVjdC5pc2JuID09IGlzYm4gPyBwcm9kdWN0IDogIiI7CiAgICAgIH0pOwogICAgICByZXR1cm4gcHJvZHVjdFswXS5uYW1lOwogICAgfSwKICAgIGdldFBpdm90UXR5KGluZGV4KSB7CiAgICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9uLnByb2R1Y3RzUGl2b3RbaW5kZXhdLnF0eTsKICAgIH0sCiAgICB0b09iamVjdChhcnIpIHsKICAgICAgbGV0IHJ2ID0ge307CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7CiAgICAgICAgYXJyW2ldICE9PSB1bmRlZmluZWQgPyAocnZbYXJyW2ldLm5hbWVdID0gbnVsbCkgOiAiIjsKICAgICAgICBhcnJbaV0gIT09IHVuZGVmaW5lZCA/IChydlthcnJbaV0uaXNibl0gPSBudWxsKSA6ICIiOwogICAgICB9CiAgICAgIHJldHVybiBydjsKICAgIH0KICB9LAogIHZhbGlkYXRvcnM6IHsKICAgIHByb2R1Y3RzKHZhbHVlKSB7CiAgICAgIHJldHVybiBWYWxpZGF0b3IudmFsdWUodmFsdWUpLnJlcXVpcmVkKCk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgInZhbGlkYXRpb24uZXJyb3JzIigpIHsKICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmlucHV0LWZpZWxkIGJ1dHRvbiIpOwogICAgICBpZiAodGhpcy52YWxpZGF0aW9uLmVycm9ycy5sZW5ndGggPiAxKSB7CiAgICAgICAgYnRuLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCAiZGlzYWJsZWQiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXRoaXMudHJhbnNhY3Rpb24pIHsKICAgICAgICAgIHRoaXMudmFsaWRhdGlvbi50b3VjaGVkUmVjb3Jkcy5sZW5ndGggPiAxCiAgICAgICAgICAgID8gYnRuLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKQogICAgICAgICAgICA6ICIiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBidG4ucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHByb2R1Y3QoKSB7CgogICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuaW5wdXQtZmllbGQgYnV0dG9uIik7CiAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgImRpc2FibGVkIik7CiAgICAgIGxldCBwcm9kdWN0ID0gdGhpcy5hbGxQcm9kdWN0cy5maWx0ZXIocHJvZHVjdCA9PiB7CiAgICAgICAgcmV0dXJuIHByb2R1Y3QuaXNibiA9PSB0aGlzLnByb2R1Y3QgfHwgcHJvZHVjdC5uYW1lID09IHRoaXMucHJvZHVjdAogICAgICAgICAgPyBwcm9kdWN0CiAgICAgICAgICA6ICIiOwogICAgICB9KTsKICAgICAgaWYgKHByb2R1Y3RbMF0pIHsKICAgICAgICBsZXQgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5hdXRvY29tcGxldGUtY29udGVudCIpOwogICAgICAgIGlmIChlbGVtKSBlbGVtLnN0eWxlLm9wYWNpdHkgPSAwOwogICAgICAgIGlmICh0aGlzLnByb2R1Y3RzSWRzLmluY2x1ZGVzKHByb2R1Y3RbMF0uaWQpKSB7CiAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnByb2R1Y3RzSWRzLmluZGV4T2YocHJvZHVjdFswXS5pZCk7CiAgICAgICAgICB0aGlzLnByb2R1Y3RBbHJlYWR5QWRkZWQgPSBmYWxzZTsKICAgICAgICAgIHRoaXMucXR5SW5jcmVhc2VkID0gdHJ1ZTsKICAgICAgICAgIHRoaXMucHJvZHVjdEFkZGVkID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnByb2R1Y3RzW2luZGV4XS5xdHkgPSB0aGlzLnByb2R1Y3RzW2luZGV4XS5xdHkgKyAxOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMucXR5SW5jcmVhc2VkID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMucHJvZHVjdCA9ICIiOwogICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMucHJvZHVjdEFkZGVkID0gdHJ1ZTsKICAgICAgICAgIHByb2R1Y3RbMF0ucXR5ID0gMTsKCiAgICAgICAgICB0aGlzLnByb2R1Y3RzLnB1c2gocHJvZHVjdFswXSk7CiAgICAgICAgICB0aGlzLnByb2R1Y3RzSWRzLnB1c2gocHJvZHVjdFswXS5pZCk7CgogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMucHJvZHVjdEFkZGVkID0gZmFsc2U7CiAgICAgICAgICB9LCAzMDAwKTsKICAgICAgICAgIHRoaXMucHJvZHVjdCA9ICIiOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jaGVja01lID0gcHJvZHVjdFswXS5pZDsKICAgICAgICBsZXQgdHJhbnNhY3Rpb25JZHMgPSBbXTsKICAgICAgICB0aGlzLnRyYW5zYWN0aW9uLnByb2R1Y3RzLmZvckVhY2gocHJvID0+IHsKICAgICAgICAgIHRyYW5zYWN0aW9uSWRzLnB1c2gocHJvWyJpZCJdKTsKICAgICAgICB9KTsKICAgICAgICBpZiAodHJhbnNhY3Rpb25JZHMuaW5jbHVkZXModGhpcy5jaGVja01lKSkgewogICAgICAgICAgbGV0IGNoZWNrZWRQcm9kdWN0ID0gewogICAgICAgICAgICBpZDogcHJvZHVjdFswXS5pZCwKICAgICAgICAgICAgaXNibjogcHJvZHVjdFswXS5pc2JuLAogICAgICAgICAgICBuYW1lOiBwcm9kdWN0WzBdLm5hbWUsCiAgICAgICAgICAgIGluZGV4OiB0cmFuc2FjdGlvbklkcy5pbmRleE9mKHRoaXMuY2hlY2tNZSkKICAgICAgICAgIH07CiAgICAgICAgICBsZXQgZmlsdGVyID0gdGhpcy5yZXBvcnRQcm9kdWN0cy5maWx0ZXIoZmlsdGVyUHJvZHVjdCA9PiB7CiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJQcm9kdWN0LmlzYm4gPT0gcHJvZHVjdFswXS5pc2JuID8gZmlsdGVyUHJvZHVjdCA6ICIiOwogICAgICAgICAgfSk7CiAgICAgICAgICBmaWx0ZXIubGVuZ3RoID4gMCA/ICIiIDogdGhpcy5yZXBvcnRQcm9kdWN0cy5wdXNoKGNoZWNrZWRQcm9kdWN0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGV0IGZpbHRlciA9IHRoaXMubm90Rm91bmRQcm9kdWN0cy5maWx0ZXIoZmlsdGVyUHJvZHVjdCA9PiB7CiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJQcm9kdWN0LmlzYm4gPT0gcHJvZHVjdFswXS5pc2JuID8gZmlsdGVyUHJvZHVjdCA6ICIiOwogICAgICAgICAgfSk7CiAgICAgICAgICBmaWx0ZXIubGVuZ3RoID4gMAogICAgICAgICAgICA/ICIiCiAgICAgICAgICAgIDogdGhpcy5ub3RGb3VuZFByb2R1Y3RzLnB1c2goewogICAgICAgICAgICAgICAgaWQ6IHByb2R1Y3RbMF0uaWQsCiAgICAgICAgICAgICAgICBpc2JuOiBwcm9kdWN0WzBdLmlzYm4sCiAgICAgICAgICAgICAgICBuYW1lOiBwcm9kdWN0WzBdLm5hbWUKICAgICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGJ0bi5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIikKICAgICAgICB9LCA0MDAwKTsKICAgIH0KICB9LAogIGFwb2xsbzogewogICAgdHJhbnNhY3Rpb24oKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcXVlcnk6IHRyYW5zYWN0aW9uUXVlcnksCiAgICAgICAgdmFyaWFibGVzKCkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaWQ6IHBhcnNlSW50KHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICByZXN1bHQoeyBkYXRhOiB7IHRyYW5zYWN0aW9uIH0gfSkgewogICAgICAgICAgdGhpcy5icmFuY2ggPSB0cmFuc2FjdGlvbi5icmFuY2guaWQ7CiAgICAgICAgfQogICAgICB9OwogICAgfSwKCiAgICBhbGxQcm9kdWN0cygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBxdWVyeTogYWxsUHJvZHVjdHMsCiAgICAgICAgcmVzdWx0KHsgZGF0YTogeyBhbGxQcm9kdWN0cyB9IH0pIHsKICAgICAgICAgIGxldCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5hdXRvY29tcGxldGUiKTsKCiAgICAgICAgICBsZXQgZGF0YSA9IHRoaXMudG9PYmplY3QoYWxsUHJvZHVjdHMpOwoKICAgICAgICAgIGxldCBvcHRpb25zID0geyBkYXRhIH07CiAgICAgICAgICBvcHRpb25zLm9uQXV0b2NvbXBsZXRlID0gdmFsID0+IHsKICAgICAgICAgICAgdGhpcy5wcm9kdWN0ID0gdmFsOwogICAgICAgICAgfTsKCiAgICAgICAgICBNLkF1dG9jb21wbGV0ZS5pbml0KGVsZW1zLCBvcHRpb25zKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Approve.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Approve.vue","sourceRoot":"src/views/transactions","sourcesContent":["<template>\n  <div class=\"row\">\n    <div id=\"approve-modal\" class=\"modal\">\n      <div class=\"modal-content\">\n        <h4>Warning</h4>\n        <p>A bunch of products found on transaction you weren't added</p>\n        <ul>\n          <li v-for=\"(product, index) in notApproved\" :key=\"index\">\n            {{ index + 1 }} . {{ product }} ({{ getName(product) }})\n          </li>\n        </ul>\n      </div>\n      <div class=\"modal-footer\">\n        <a class=\"modal-close waves-effect waves-green btn-flat\">Close</a>\n        <a\n          @click=\"updateTransaction()\"\n          class=\"modal-close waves-effect waves-green btn-flat\"\n          >Agree</a\n        >\n      </div>\n    </div>\n    <Breadcrumbs :title=\"title\" :path=\"path\" :fregment=\"fregment\" />\n\n    <div class=\"col s12 mt-65\">\n      <div class=\"container\">\n        <!-- Current balance & total transactions cards-->\n        <div class=\"row mt-4\">\n          <div class=\"col s12 m12 l12\">\n            <!-- Current Balance -->\n            <h5 class=\"form-title\">\n              <i class=\"material-icons app-header-icon text-top\"\n                >perm_identity</i\n              >\n              {{ $t(title, { fregment }) }}\n            </h5>\n\n            <div class=\"card animated  fadeInLeft \">\n              <div class=\"card-content\">\n                <form @submit.prevent=\"approve()\">\n                  <div class=\"row\">\n                    <div class=\"col s12 l6\">\n                      <div class=\"row\">\n                        <div\n                          class=\"input-field col s12\"\n                          :class=\"{ error: validation.hasError('product') }\"\n                        >\n                          <i\n                            class=\"material-icons prefix isbn-clear\"\n                            @click=\"product = ''\"\n                            >clear</i\n                          >\n                          <input\n                            v-model=\"product\"\n                            id=\"isbn\"\n                            type=\"text\"\n                            class=\"input-isbn autocomplete\"\n                            autocomplete=\"off\"\n                          />\n                          <label\n                            for=\"isbn\"\n                            class=\"label-isbn\"\n                            :class=\"isbn ? 'active' : ''\"\n                            >{{ $t(\"product\") }}</label\n                          >\n                          <div class=\"message\">\n                            <span\n                              v-if=\"this.productAlreadyAdded\"\n                              class=\"error-text\"\n                              >{{ $t(\"poduct_already_add\") }}</span\n                            >\n                            <span\n                              v-if=\"this.productAdded\"\n                              class=\"success-text\"\n                              >{{ $t(\"poduct_added_successfully\") }}</span\n                            >\n                            {{ validation.firstError(\"isbn\") }}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"col s12 l6\">\n                      <div class=\"row\">\n                        <div class=\"input-field col s12\">\n                          <div class=\"products\">\n                            {{ $t(\"products\") }}\n                          </div>\n\n                          <div class=\"invoice__table\">\n                            <table class=\"highlight responsive-table\">\n                              <thead>\n                                <tr>\n                                  <th data-field=\"no\">No</th>\n                                  <th data-field=\"item\">Item</th>\n                                  <th data-field=\"price\">Qty</th>\n                                </tr>\n                              </thead>\n                              <tbody>\n                                <tr\n                                  v-for=\"(product, index) in products\"\n                                  :key=\"index\"\n                                >\n                                  <td>{{ index + 1 }}.</td>\n                                  <td>{{ product.name }}</td>\n                                  <td>\n                                    <div class=\"counter\">\n                                      <!-- <i class=\"material-icons\" @click=\"increaseQty(index)\">add</i>   -->\n                                      <input\n                                        class=\"border-none w2\"\n                                        v-model=\"product.qty\"\n                                      />\n                                      <!-- <i class=\"material-icons\" @click=\"decreaseQty(index)\">delete</i> -->\n                                    </div>\n                                  </td>\n                                  <td>\n                                    <i\n                                      class=\"material-icons\"\n                                      @click=\"removeProduct(product.id)\"\n                                      style=\"cursor:pointer\"\n                                      >delete</i\n                                    >\n                                  </td>\n                                </tr>\n                              </tbody>\n                            </table>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"row\">\n                    <div class=\"input-field col s12\">\n                      <button\n                        class=\"btn create cyan waves-effect waves-light left\"\n                        type=\"submit\"\n                        name=\"action\"\n                        disabled=\"disabled\"\n                      >\n                        {{ $t(\"approve\") }}\n                        <i class=\"material-icons right\">send</i>\n                      </button>\n                    </div>\n                  </div>\n                  <div class=\"row\">\n                    <div class=\"col s12 l12\">\n                      <div class=\"row\">\n                        <div class=\"input-field col s12\">\n                          <div class=\"products\">\n                            {{ $t(\"report\") }}\n                          </div>\n\n                          <div class=\"invoice__table\">\n                            <table class=\"highlight responsive-table\">\n                              <thead>\n                                <tr>\n                                  <th data-field=\"no\">No</th>\n                                  <th data-field=\"isbn\">Isbn</th>\n                                  <th data-field=\"item\">Item</th>\n                                  <th data-field=\"qty\">Qty</th>\n                                  <th data-field=\"difference\">difference</th>\n                                  <th data-field=\"status\">status</th>\n                                </tr>\n                              </thead>\n                              <tbody>\n                                <tr\n                                  v-for=\"(product, index) in reportProducts\"\n                                  :key=\"index\"\n                                  :class=\"\n                                    getPivotQty(product.index) ==\n                                    getQty(product.isbn)\n                                      ? 'success'\n                                      : 'danger'\n                                  \"\n                                >\n                                  <td>{{ index + 1 }}.</td>\n                                  <td>{{ product.isbn }}</td>\n                                  <td>{{ product.name }}</td>\n                                  <td>{{ getQty(product.isbn) }}</td>\n\n                                  <td>\n                                    {{\n                                      getPivotQty(product.index) -\n                                        parseInt(getQty(product.isbn))\n                                    }}\n                                  </td>\n                                  <td>\n                                    <span\n                                      v-if=\"\n                                        getPivotQty(product.index) ==\n                                          getQty(product.isbn)\n                                      \"\n                                    >\n                                      {{ $t(\"approved\") }}\n                                    </span>\n                                    <span\n                                      v-else-if=\"\n                                        getPivotQty(product.index) >\n                                          getQty(product.isbn)\n                                      \"\n                                    >\n                                      {{ $t(\"plus\") }}\n                                    </span>\n                                    <span v-else>\n                                      {{ $t(\"minus\") }}\n                                    </span>\n                                  </td>\n                                </tr>\n                                <tr\n                                  v-for=\"(product, index) in notFoundProducts\"\n                                  :key=\"index\"\n                                  class=\"danger\"\n                                >\n                                  <td>\n                                    {{ reportProducts.length + index + 1 }}.\n                                  </td>\n                                  <td>{{ product.isbn }}</td>\n                                  <td>{{ product.name }}</td>\n                                  <td>{{ getQty(product.isbn) }}</td>\n\n                                  <td>{{ parseInt(getQty(product.isbn)) }}</td>\n                                  <td>\n                                    {{ $t(\"notfound_in_transaction\") }}\n                                  </td>\n                                </tr>\n                                <tr\n                                  v-for=\"(product, index) in notApproved\"\n                                  :key=\"index\"\n                                  class=\"danger\"\n                                >\n                                  <td>\n                                    {{\n                                      reportProducts.length +\n                                        notFoundProducts.length +\n                                        index +\n                                        1\n                                    }}.\n                                  </td>\n                                  <td>{{ product }}</td>\n                                  <td>{{ getName(product) }}</td>\n                                  <td>{{ getQty(product) }}</td>\n\n                                  <td>{{ parseInt(getQty(product)) }}</td>\n                                  <td>\n                                    {{ $t(\"notfound_in_check\") }}\n                                  </td>\n                                </tr>\n                              </tbody>\n                            </table>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport M from \"materialize-css\";\nimport Breadcrumbs from \"@/components/layouts/Breadcrumbs.vue\";\nimport SimpleVueValidation from \"simple-vue-validator\";\nimport {\n  transactionQuery,\n  allProducts,\n  updateTransactionProduct,\n  updateTransaction\n} from \"@/graphql/queries/queries.js\";\nconst Validator = SimpleVueValidation.Validator;\nexport default {\n  name: \"approve-transactions\",\n  data() {\n    return {\n      transaction: \"\",\n      allProducts: [],\n      product: \"\",\n      path: [],\n      isbn: \"\",\n      qtyIncreased: false,\n      currentProducts: [],\n      reportProducts: [],\n      notFoundProducts: [],\n      productsIds: [],\n      notApproved: [],\n      checkMe: \"\",\n      productAdded: false,\n      productAlreadyAdded: false,\n      fregment: \"\",\n      validationError: \"\",\n      qtys: [],\n      title: \"approve_transaction\",\n      products: []\n    };\n  },\n  components: {\n    Breadcrumbs\n  },\n  methods: {\n    removeProduct(id) {\n      this.products = this.products.filter(product => {\n        return product.id !== id ? product : \"\";\n      });\n      this.productsIds = this.productsIds.filter(product => {\n        return product.id !== id ? product : \"\";\n      });\n      this.reportProducts = this.reportProducts.filter(product => {\n        return product.id !== id ? product : \"\";\n      });\n      this.notFoundProducts = this.notFoundProducts.filter(product => {\n        return product.id !== id ? product : \"\";\n      });\n    },\n    approve() {\n      let isbns = [];\n      let transactionIsbns = [];\n      this.reportProducts.forEach(product => {\n        isbns.push(product.isbn);\n      });\n      this.transaction.products.forEach(product => {\n        transactionIsbns.push(product.isbn);\n      });\n      let intersection = transactionIsbns.filter(isbn => {\n        return isbns.includes(isbn) ? \"\" : isbn;\n      });\n      if (intersection.length > 0) {\n        this.notApproved = intersection;\n        let elems = document.querySelectorAll(\".modal\");\n        let elem = document.querySelector(\"#approve-modal\");\n        M.Modal.init(elems, {});\n        let instance = M.Modal.getInstance(elem);\n        instance.open();\n      } else {\n        this.updateTransaction();\n      }\n    },\n    updateTransaction() {\n      this.products.forEach(product => {\n        this.qtys.push(product.qty);\n      });\n      this.$apollo\n        .mutate({\n          mutation: updateTransactionProduct,\n          // Parameters\n          variables: {\n            transaction: parseInt(this.$route.params.id),\n            qtys: this.qtys,\n            branch: this.transaction.branch.id,\n            products: this.productsIds\n          }\n        })\n        .then(() => {\n          this.$apollo\n            .mutate({\n              mutation: updateTransaction,\n              // Parameters\n              variables: {\n                id: parseInt(this.$route.params.id),\n                branch: this.transaction.branch.id,\n                approved: true\n              }\n            })\n            .then(() => {\n              M.toast({\n                html: `${this.$t(\"updated_successfully\", {\n                  name: \"transaction\"\n                })}`,\n                classes: \"success toast\",\n                displayLength: 3000\n              });\n              this.$router.push({ name: \"transactions.index\" });\n            })\n            .catch(() => {\n              //console.log(e)\n              this.validationError = this.$t(\"branch_required\");\n            });\n        });\n    },\n    getQty(isbn) {\n      let product = this.allProducts.filter(product => {\n        return product.isbn == isbn ? product : \"\";\n      });\n      return product[0].qty;\n    },\n    getName(isbn) {\n      let product = this.allProducts.filter(product => {\n        return product.isbn == isbn ? product : \"\";\n      });\n      return product[0].name;\n    },\n    getPivotQty(index) {\n      return this.transaction.productsPivot[index].qty;\n    },\n    toObject(arr) {\n      let rv = {};\n      for (var i = 0; i < arr.length; ++i) {\n        arr[i] !== undefined ? (rv[arr[i].name] = null) : \"\";\n        arr[i] !== undefined ? (rv[arr[i].isbn] = null) : \"\";\n      }\n      return rv;\n    }\n  },\n  validators: {\n    products(value) {\n      return Validator.value(value).required();\n    }\n  },\n  watch: {\n    \"validation.errors\"() {\n      const btn = document.querySelector(\".input-field button\");\n      if (this.validation.errors.length > 1) {\n        btn.setAttribute(\"disabled\", \"disabled\");\n      } else {\n        if (!this.transaction) {\n          this.validation.touchedRecords.length > 1\n            ? btn.removeAttribute(\"disabled\")\n            : \"\";\n        } else {\n          btn.removeAttribute(\"disabled\");\n        }\n      }\n    },\n    product() {\n\n      const btn = document.querySelector(\".input-field button\");\n      btn.setAttribute(\"disabled\", \"disabled\");\n      let product = this.allProducts.filter(product => {\n        return product.isbn == this.product || product.name == this.product\n          ? product\n          : \"\";\n      });\n      if (product[0]) {\n        let elem = document.querySelector(\".autocomplete-content\");\n        if (elem) elem.style.opacity = 0;\n        if (this.productsIds.includes(product[0].id)) {\n          let index = this.productsIds.indexOf(product[0].id);\n          this.productAlreadyAdded = false;\n          this.qtyIncreased = true;\n          this.productAdded = false;\n          this.products[index].qty = this.products[index].qty + 1;\n          setTimeout(() => {\n            this.qtyIncreased = false;\n            this.product = \"\";\n          }, 1000);\n        } else {\n          this.productAdded = true;\n          product[0].qty = 1;\n\n          this.products.push(product[0]);\n          this.productsIds.push(product[0].id);\n\n          setTimeout(() => {\n            this.productAdded = false;\n          }, 3000);\n          this.product = \"\";\n        }\n\n        this.checkMe = product[0].id;\n        let transactionIds = [];\n        this.transaction.products.forEach(pro => {\n          transactionIds.push(pro[\"id\"]);\n        });\n        if (transactionIds.includes(this.checkMe)) {\n          let checkedProduct = {\n            id: product[0].id,\n            isbn: product[0].isbn,\n            name: product[0].name,\n            index: transactionIds.indexOf(this.checkMe)\n          };\n          let filter = this.reportProducts.filter(filterProduct => {\n            return filterProduct.isbn == product[0].isbn ? filterProduct : \"\";\n          });\n          filter.length > 0 ? \"\" : this.reportProducts.push(checkedProduct);\n        } else {\n          let filter = this.notFoundProducts.filter(filterProduct => {\n            return filterProduct.isbn == product[0].isbn ? filterProduct : \"\";\n          });\n          filter.length > 0\n            ? \"\"\n            : this.notFoundProducts.push({\n                id: product[0].id,\n                isbn: product[0].isbn,\n                name: product[0].name\n              });\n        }\n      }\n\n       setTimeout(() => {\n          btn.removeAttribute(\"disabled\")\n        }, 4000);\n    }\n  },\n  apollo: {\n    transaction() {\n      return {\n        query: transactionQuery,\n        variables() {\n          return {\n            id: parseInt(this.$route.params.id)\n          };\n        },\n        result({ data: { transaction } }) {\n          this.branch = transaction.branch.id;\n        }\n      };\n    },\n\n    allProducts() {\n      return {\n        query: allProducts,\n        result({ data: { allProducts } }) {\n          let elems = document.querySelectorAll(\".autocomplete\");\n\n          let data = this.toObject(allProducts);\n\n          let options = { data };\n          options.onAutocomplete = val => {\n            this.product = val;\n          };\n\n          M.Autocomplete.init(elems, options);\n        }\n      };\n    }\n  }\n};\n</script>\n<style scoped>\n@import url(\"../../sass/components/_invoice.scss\");\n.isbn-clear {\n  left: auto;\n  right: 0;\n  cursor: pointer;\n}\n.input-isbn {\n  margin-right: 4.5rem;\n  margin-left: 0rem !important;\n}\n.label-isbn {\n  margin-left: 0 !important;\n}\n.counter {\n  width: 50px;\n  border: 1px solid #ddd;\n  padding: 5px;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.counter i {\n  cursor: pointer;\n}\n.w2 {\n  width: 30px;\n}\n</style>\n"]}]}