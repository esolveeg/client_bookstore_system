{"remainingRequest":"/root/ahmed/vueJs/systemfinal/node_modules/vue-loader/lib/index.js??vue-loader-options!/root/ahmed/vueJs/systemfinal/src/components/datatable/DataTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/root/ahmed/vueJs/systemfinal/src/components/datatable/DataTable.vue","mtime":1591567632168},{"path":"/root/ahmed/vueJs/systemfinal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/ahmed/vueJs/systemfinal/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/root/ahmed/vueJs/systemfinal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/ahmed/vueJs/systemfinal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBEYXRhVGFibGUgZnJvbSAiQC9jbGFzc2VzL0RhdGFUYWJsZS5qcyI7CmltcG9ydCBEYXRhVGFibGUgZnJvbSAiQC9jbGFzc2VzL0RhdGFUYWJsZS5qcyI7CmltcG9ydCBNIGZyb20gIm1hdGVyaWFsaXplLWNzcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZGF0YWJUYWJsZSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiAicHJvZHVjdHMiLAogICAgICBidG5zOiBbXSwKICAgICAgZGF0ZU9uZToiIiwKICAgICAgZGF0ZVR3bzoiIiwKICAgICAgZGF0YVRhYmxlOiBuZXcgRGF0YVRhYmxlKHsKICAgICAgICBvZmZzZXQ6IDAsCiAgICAgICAgbm86IDEwLAogICAgICAgIHNvcnRfYnk6ICIiLAogICAgICAgIHNvcnRfZnVuYzogIiIsCiAgICAgICAgc2VhcmNoOiAiIgogICAgICB9ICwgdGhpcy51cmwgICwgIHRoaXMuZXhlY2x1ZGUgLCB0aGlzLmZpbHRlcnMgLCB0aGlzLnRhYmxlTmFtZSkKICAgIH07CiAgfSwKICBwcm9wczogWyJ1cmwiICwgImV4ZWNsdWRlIiAsICJ0YWJsZU5hbWUiICwgJ2ZpbHRlcnMnICwgJ2lkZW50aWZlciddLAogIGNvbXB1dGVkOnsKICAgIHNlbGVjdHMoKSB7CiAgICAgIHJldHVybiB0aGlzLmRhdGFUYWJsZS5maWx0ZXJzLmZpbHRlcihmaWx0ZXIgPT4gewogICAgICAgIHJldHVybiBmaWx0ZXIudHlwZSA9PSAnc2VsZWN0JwogICAgICB9KTsKICAgIH0sCiAgICBkYXRlcygpIHsKICAgICAgcmV0dXJuIHRoaXMuZGF0YVRhYmxlLmZpbHRlcnMuZmlsdGVyKGZpbHRlciA9PiB7CiAgICAgICAgcmV0dXJuIGZpbHRlci50eXBlID09ICdkYXRlJwogICAgICB9KTsKICAgIH0sCiAgICBzd2l0Y2hlcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLmRhdGFUYWJsZS5maWx0ZXJzLmZpbHRlcihmaWx0ZXIgPT4gewogICAgICAgIHJldHVybiBmaWx0ZXIudHlwZSA9PSAnc3dpdGNoZXInCiAgICAgIH0pOwogICAgfQoKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldERhdGEoKSB7CiAgICAgIHRoaXMuZGF0YVRhYmxlLmdldERhdGEoKQogICAgfSwKICAgIGxvYWRTZWxlY3RzKCkgewogICAgICAgbGV0IHNlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJzZWxlY3QiKTsKICAgICAgIHNlbGVjdHMuZm9yRWFjaChzZWxlY3QgPT4gewogICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBNLkZvcm1TZWxlY3QuaW5pdChzZWxlY3QsIHt9KTsKICAgICAgfSwgMjAwMCk7CiAgICAgICB9KQogICAgICAKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldERhdGEoKTsKICAgIGxldCBicmFuY2ggPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYnJhbmNoJykgPyAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JyYW5jaCcpIDogJycKICAgIGlmKGJyYW5jaCl7CiAgICAgIHRoaXMuZGF0YVRhYmxlLnBhcmFtc1tgYnJhbmNoYF0gPSBicmFuY2gKICAgIH0KICB9LAogIG1vdW50ZWQoKXsKICAgIHRoaXMuZGF0YVRhYmxlLmdldEZpbHRlcnNEYXRhKCkudGhlbigoKT0+ewogICAgICB0aGlzLmxvYWRTZWxlY3RzKCk7CiAgICB9KQogIH0KfTsK"},{"version":3,"sources":["DataTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DataTable.vue","sourceRoot":"src/components/datatable","sourcesContent":["<template>\n  <div class=\"card animated  fadeInUp \">\n    \n    <div class=\"card-content\" style=\"overflow-x:scroll\">\n      <div>\n        <div>\n          <div class=\"tableFilters\">\n            <div class=\"tableFilters-flex\" style=\"display:flex\">\n            <div class=\"search-input-field\">\n              <input\n                class=\"input\"\n                @input=\"dataTable.search($event.target.value)\"\n                :value=\"dataTable.params.search\"\n                type=\"text\"\n                :placeholder=\"$t('search_table')\"\n              />\n            </div>\n            <div class=\"input-field \" style=\"width:100%\" v-for=\"filter in selects\" :key=\"filter.param\">\n              <select id=\"branches\" @change=\"dataTable.filterData($event.target.value , filter)\" v-model=\"filter.value\">\n                <option value=\"\" disabled=\"none\">{{\n                  $t(\"branches\")\n                }}</option>\n                <option value=\"\">{{ $t(\"none\") }}</option>\n                <option value=\"store\">{{ $t(\"store\") }}</option>\n                <option\n                  :value=\"val.id\"\n                  v-for=\"val in filter.data\"\n                  :key=\"val.id\"\n                  >{{ val.name }}</option\n                >\n              </select>\n              <label for=\"branches\">{{ $t(\"branches\") }}</label>\n            </div>\n             <div class=\"switch\" v-for=\"filter in switchers\" :key=\"filter.id\">\n              <label>\n                {{filter.name}}\n                <input type=\"checkbox\" v-model=\"filter.value\"  @change=\"dataTable.filterData(filter.value , filter)\">\n                <span class=\"lever\"></span>\n              </label>\n            </div>\n            <div class=\"input-field\" style=\"width:100%\"  v-for=\"filter in dates\" :key=\"filter.id\">\n              <AirbnbStyleDatepicker\n        :trigger-element-id=\"'datepicker-trigger'\"\n        :mode=\"'range'\"\n        :fullscreen-mobile=\"true\"\n        :date-one=\"dateOne\"\n        :date-two=\"dateTwo\"\n       \n      />\n              <label>{{ $t(filter.name) }}</label>\n\n            </div>\n            </div>\n\n\n            <div class=\"input-field\">\n              <select id=\"show\" @change=\"dataTable.changeCount($event.target.value)\">\n                <option value=\"10\">10</option>\n                <option value=\"20\">20</option>\n                <option value=\"30\">30</option>\n                <option value=\"50\">50</option>\n                <option value=\"100\">100</option>\n                <option value=\"200\">200</option>\n              </select>\n              <label>{{ $t(\"show\") }}</label>\n            </div>\n          </div>\n          <table class=\"table data-table\">\n            <thead>\n              <tr>\n                <th>\n                  <label class=\"checkbox\">\n                    <input id=\"selectAll\" type=\"checkbox\" v-model='dataTable.allChecked' @change=\"dataTable.selectAll()\"/>\n                    <span></span>\n                  </label>\n                </th>\n                <!-- <th\n          v-for=\"column in columns\"\n          :key=\"column.name\"\n          @click=\"$emit('sort', column.name)\"\n          :class=\"sortKey === column.name ? sortOrder : 'sorting'\"\n          :style=\"'width:' + column.width + ';' + 'cursor:pointer;'\"\n        >\n          {{ $t(`${column.label}`) }}\n        </th> -->\n\n                <th v-for=\"column in dataTable.columns\" @click=\"dataTable.sort(column)\" :key=\"column\">\n                  {{ $t(column) }}\n                </th>\n                <th>\n                  {{ $t(\"actions\") }}\n                </th>\n              </tr>\n            </thead>\n            <tbody v-if=\"!dataTable.isLoading\">\n              <div v-if=\"dataTable.totalRows == 0\"> \n                {{$t(\"no-data\")}}\n              </div>\n              <tr v-else v-for=\"val in dataTable.data\" :key=\"val.id\">\n                <td>\n                  <label>\n                    <input class=\"checkbox\" type=\"checkbox\" name=\"checkbox[]\" @change=\"dataTable.select()\" :value=\"val[identifer]\" v-model=\"dataTable.checkedItems\"/>\n                    <span></span>\n                  </label>\n                </td>\n                <td v-for=\"column in dataTable.columns\" :key=\"column\">\n                  {{ val[column] }}\n                </td>\n                <td>\n                  <a v-if=\"dataTable.canView\" @click.prevent=\"$router.push({ name: `${tableName}.view` ,  params: { id: parseInt(val.id) } } )\" class=\"btn waves-effect waves-light actions-btn view\"\n                    ><i class=\"material-icons hide-on-med-and-up bold\"\n                      >remove_red_eye</i\n                    ><span class=\"hide-on-small-onl text-white\"\n                      >{{ $t(\"plain_view\") }}\n                      <i class=\"material-icons\">remove_red_eye</i></span\n                    ></a\n                  >\n                  <a  v-if=\"dataTable.canEdit\" @click.prevent=\"$router.push({ name: `${tableName}.edit` ,  params: { id: val.id } })\" class=\"btn waves-effect waves-light actions-btn edit\"\n                    ><i class=\"material-icons hide-on-med-and-up bold\">edit</i\n                    ><span class=\"hide-on-small-onl text-white\"\n                      >{{ $t(\"plain_edit\") }}\n                      <i class=\"material-icons\">edit</i></span\n                    ></a\n                  >\n                  <a  v-if=\"dataTable.canDelete\" @click.prevent=\"dataTable.delete($modal , {id:val.id , name:val.name})\" class=\"btn waves-effect waves-light actions-btn danger\"\n                    ><i class=\"material-icons hide-on-med-and-up bold\">delete</i\n                    ><span class=\"hide-on-small-onl text-white\"\n                      >{{ $t(\"delete\") }}\n                      <i class=\"material-icons\">delete</i></span\n                    ></a\n                  >\n                </td>\n              </tr>\n            </tbody>\n            <tfoot v-if=\"dataTable.total !== 0\">\n              <tr >\n                <td>\n                  total : {{dataTable.total}}\n                </td>\n              </tr>\n            </tfoot>\n          </table>\n          <ul class=\"pagination flex-center mt-30\">\n            <span class=\"page-state\"> </span>\n            <li class=\"flex-center\"   @click=\"dataTable.prev()\" >\n              <a class=\"flex-center\"\n                ><i class=\"material-icons\">chevron_left</i></a\n              >\n            </li>\n            <li class=\"waves-effect\">\n              <a>{{dataTable.currentPage}}</a>\n            </li>\n\n            <li class=\"flex-center\"  @click=\"dataTable.next()\">\n              <a class=\"flex-center\"\n                ><i class=\"material-icons\">chevron_right</i></a\n              >\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// import DataTable from \"@/classes/DataTable.js\";\nimport DataTable from \"@/classes/DataTable.js\";\nimport M from \"materialize-css\";\nexport default {\n  name: \"databTable\",\n  data() {\n    return {\n      title: \"products\",\n      btns: [],\n      dateOne:\"\",\n      dateTwo:\"\",\n      dataTable: new DataTable({\n        offset: 0,\n        no: 10,\n        sort_by: \"\",\n        sort_func: \"\",\n        search: \"\"\n      } , this.url  ,  this.execlude , this.filters , this.tableName)\n    };\n  },\n  props: [\"url\" , \"execlude\" , \"tableName\" , 'filters' , 'identifer'],\n  computed:{\n    selects() {\n      return this.dataTable.filters.filter(filter => {\n        return filter.type == 'select'\n      });\n    },\n    dates() {\n      return this.dataTable.filters.filter(filter => {\n        return filter.type == 'date'\n      });\n    },\n    switchers() {\n      return this.dataTable.filters.filter(filter => {\n        return filter.type == 'switcher'\n      });\n    }\n\n  },\n  methods: {\n    getData() {\n      this.dataTable.getData()\n    },\n    loadSelects() {\n       let selects = document.querySelectorAll(\"select\");\n       selects.forEach(select => {\n         setTimeout(() => {\n        M.FormSelect.init(select, {});\n      }, 2000);\n       })\n      \n    }\n  },\n  created() {\n    this.getData();\n    let branch = localStorage.getItem('branch') ?  localStorage.getItem('branch') : ''\n    if(branch){\n      this.dataTable.params[`branch`] = branch\n    }\n  },\n  mounted(){\n    this.dataTable.getFiltersData().then(()=>{\n      this.loadSelects();\n    })\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.tableFilters {\n  display: flex;\n  justify-content: space-between;\n  margin: 3rem 0;\n\n  & .input-field {\n    width: 80px;\n  }\n  & .search-input-field {\n    width: 200px;\n  }\n}\n\n.select-wrapper + label {\n  font-size: 1rem;\n}\ntbody tr td:not(:last-child) {\n  font-family: \"Muli\", sans-serif !important;\n}\n.btn:not(:last-child) {\n  margin-inline-end: 1rem;\n  @media screen And (max-width: 1200px) {\n    margin-block-end: 1rem;\n    margin-inline-end: 0;\n  }\n  @media screen AND (max-width: 992px) {\n    margin-block-end: 0rem;\n  }\n}\n.btn.view {\n  background-color: #343a40;\n}\n.btn.approve {\n  background-color: #ff4081;\n}\n.btn span {\n  color: #fff;\n}\n.not-found {\n  position: absolute;\n  text-align: center;\n  margin: 2rem 0;\n  width: 100%;\n  font-size: 1.6rem;\n}\n.tableFilters .tableFilters-flex{\n  display: flex;\n  & div:not(:last-child){\n    \n    margin-inline-end: 50px;\n  }\n}\na {\n  cursor: pointer;\n  user-select: none;\n}\n.flex-center {\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n}\n.mt-30 {\n  margin-top: 30px;\n}\n.page-state {\n  margin-inline-end: 2rem;\n}\n</style>\n"]}]}