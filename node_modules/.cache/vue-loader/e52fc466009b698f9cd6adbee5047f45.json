{"remainingRequest":"/root/ahmed/vueJs/systemfinal/node_modules/vue-loader/lib/index.js??vue-loader-options!/root/ahmed/vueJs/systemfinal/src/components/layouts/AppHeader.vue?vue&type=style&index=0&id=4d153acd&scoped=true&lang=css&","dependencies":[{"path":"/root/ahmed/vueJs/systemfinal/src/components/layouts/AppHeader.vue","mtime":1591243167312},{"path":"/root/ahmed/vueJs/systemfinal/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/ahmed/vueJs/systemfinal/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/root/ahmed/vueJs/systemfinal/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/root/ahmed/vueJs/systemfinal/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/ahmed/vueJs/systemfinal/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgdXJsKCIuLi8uLi9zYXNzL2xheW91dHMvX2hlYWRlci5taW4uY3NzIik7Cg=="},{"version":3,"sources":["AppHeader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA","file":"AppHeader.vue","sourceRoot":"src/components/layouts","sourcesContent":["<template>\n  <header class=\"page-topbar\" id=\"header\">\n    <div class=\"navbar navbar-fixed\">\n      <nav\n        class=\"navbar-main navbar-color nav-collapsible sideNav-lock navbar-dark gradient-45deg-indigo-purple no-shadow\"\n      >\n        <div class=\"nav-wrapper\">\n          <div class=\"header-search-wrapper hide-on-med-and-down\">\n            <i class=\"material-icons\">search</i>\n            <input\n              class=\"header-search-input z-depth-2\"\n              type=\"text\"\n              name=\"Search\"\n              :placeholder=\"$t('search')\"\n            />\n          </div>\n          <ul class=\"navbar-list right\">\n            <li>\n              <a\n                @click.prevent=\"setLocale()\"\n                class=\"waves-effect waves-block waves-light translation-button\"\n                ><span class=\"flag-icon\"></span\n              ></a>\n            </li>\n            <li class=\"hide-on-med-and-down\">\n              <a class=\"waves-effect waves-block waves-light toggle-fullscreen\"\n                ><i class=\"material-icons\">settings_overscan</i></a\n              >\n            </li>\n            <li class=\"hide-on-large-only\" @click=\"toggleSearch\">\n              <a class=\"waves-effect waves-block waves-light search-button\"\n                ><i class=\"material-icons\">search</i></a\n              >\n            </li>\n            <li>\n              <a\n                class=\"dropdown-trigger waves-effect waves-block waves-light profile-button\"\n                data-target=\"profile-dropdown\"\n                ><span class=\"avatar-status\"\n                  ><img\n                    src=\"https://pixinvent.com/materialize-material-design-admin-template/app-assets/images/avatar/avatar-7.png\"\n                    alt=\"avatar\"/></span\n              ></a>\n              <ul class=\"dropdown-content\" id=\"profile-dropdown\">\n                <li>\n                  <a @click.prevent=\"logout()\" class=\"grey-text text-darken-1\"\n                    ><i class=\"material-icons\">keyboard_tab</i>\n                    {{ $t(\"logout\") }}</a\n                  >\n                </li>\n              </ul>\n            </li>\n          </ul>\n        </div>\n        <nav class=\"search-sm hide\">\n          <div class=\"nav-wrapper\">\n            <form>\n              <div class=\"input-field\">\n                <input class=\"search-box-sm\" type=\"search\" required=\"\" />\n                <label class=\"label-icon\" for=\"search\"\n                  ><i class=\"material-icons search-sm-icon\">search</i></label\n                >\n                <i class=\"material-icons search-sm-close\" @click=\"toggleSearch\"\n                  >close</i\n                >\n              </div>\n            </form>\n          </div>\n        </nav>\n      </nav>\n    </div>\n  </header>\n</template>\n<script>\nimport { onLogout } from \"../../vue-apollo.js\";\nimport { meQuery } from \"@/graphql/queries/queries.js\";\nimport M from \"materialize-css\";\nexport default {\n  apollo: {\n    me: {\n      query: meQuery,\n      result({ data: { me } }) {\n        let permissions = [];\n        this.userId = me.id;\n        me.roles.forEach(role => {\n          this.roles.push(role.slug);\n          role.permissions.forEach(per => {\n            permissions.push(per.slug);\n          });\n        });\n        if (this.roles.includes(\"pos\")) {\n          this.branch_id = me.employee.branch.id;\n        }\n        this.permissions = permissions;\n        this.isPos = this.roles.includes(\"pos\") ? true : false;\n      }\n    }\n  },\n  store: {\n    isPos: \"isPos\",\n    branch_id: \"branch_id\",\n    userId: \"userId\",\n    permissions: \"permissions\",\n    roles: \"roles\",\n    me: \"me\"\n  },\n  methods: {\n    toggleSearch: () => {\n      console.log(this.me);\n      let searchBox = document.querySelector(\".search-sm\");\n      searchBox.classList.toggle(\"hide\");\n    },\n    logout() {\n      onLogout(this.$apollo.provider.defaultClient);\n      localStorage.removeItem('permissons')\n      localStorage.removeItem('token')\n      localStorage.removeItem('branch')\n      localStorage.removeItem('allbranches')\n      \n      this.$router.push(\"/login\");\n    },\n    setLocale() {\n      this.$i18n.locale = this.$i18n.locale == \"en\" ? \"ar\" : \"en\";\n      localStorage.setItem(\"locale\", this.$i18n.locale);\n      const html = document.querySelector(\"html\");\n      if (this.$i18n.locale == \"ar\") {\n        html.classList.add(\"rtl\");\n        html.setAttribute(\"lang\", \"ar\");\n      } else {\n        html.classList.remove(\"rtl\");\n        html.setAttribute(\"lang\", \"en\");\n      }\n    }\n  },\n  mounted() {\n    let dropdowns = document.querySelectorAll(\".dropdown-trigger\");\n    M.Dropdown.init(dropdowns, {\n      alignment: \"right\",\n      coverTrigger: false\n    });\n  }\n};\n</script>\n\n<style scoped>\n@import url(\"../../sass/layouts/_header.min.css\");\n</style>\n"]}]}