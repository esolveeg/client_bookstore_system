{"remainingRequest":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/src/views/roles/Create.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/src/views/roles/Create.vue","mtime":1609793656570},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/cache-loader/dist/cjs.js","mtime":1609793563794},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/babel-loader/lib/index.js","mtime":1609793590147},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/cache-loader/dist/cjs.js","mtime":1609793563794},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/vue-loader/lib/index.js","mtime":1609793558535}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCcmVhZGNydW1icyBmcm9tICJAL2NvbXBvbmVudHMvbGF5b3V0cy9CcmVhZGNydW1icy52dWUiOwppbXBvcnQgTSBmcm9tICJtYXRlcmlhbGl6ZS1jc3MiOwppbXBvcnQgU2ltcGxlVnVlVmFsaWRhdGlvbiBmcm9tICJzaW1wbGUtdnVlLXZhbGlkYXRvciI7CmltcG9ydCB7CiAgY3JlYXRlUm9sZSwKICB1cGRhdGVSb2xlLAogIHJvbGVRdWVyeQp9IGZyb20gIkAvZ3JhcGhxbC9xdWVyaWVzL3F1ZXJpZXMuanMiOwpjb25zdCBWYWxpZGF0b3IgPSBTaW1wbGVWdWVWYWxpZGF0aW9uLlZhbGlkYXRvcjsKaW1wb3J0IGdxbCBmcm9tICJncmFwaHFsLXRhZyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZWRpdC1hZGQtcm9sZXMiLAogIGNvbXBvbmVudHM6IHsKICAgIEJyZWFkY3J1bWJzCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGF0aDogW3sgdGl0bGU6ICJyb2xlcyIsIHJvdXRlOiAicm9sZXMuaW5kZXgiIH1dLAogICAgICByb2xlQnlJZDoge30sCiAgICAgIG5hbWU6ICIiLAogICAgICBzbHVnOiAiIiwKICAgICAgZGVzY3JpcHRpb246ICIiLAogICAgICBhbGxVc2VyczogIiIsCiAgICAgIGFsbFBlcm1pc3Npb25zOiBbXSwKICAgICAgdXNlcnM6IFtdLAogICAgICBwZXJtaXNzaW9uczogW10sCiAgICAgIHRpdGxlOiAiY3JlYXRlX3JvbGUiLAogICAgICB2YWxpZGF0aW9uRXJyb3I6ICIiLAogICAgICBmcmVnbWVudDogIiIKICAgIH07CiAgfSwKICB2YWxpZGF0b3JzOiB7CiAgICBuYW1lKHZhbHVlKSB7CiAgICAgIHJldHVybiBWYWxpZGF0b3IudmFsdWUodmFsdWUpCiAgICAgICAgLnJlcXVpcmVkKCkKICAgICAgICAubWluTGVuZ3RoKDMpOwogICAgfSwKICAgIHVzZXJzKHZhbHVlKSB7CiAgICAgIHJldHVybiBWYWxpZGF0b3IudmFsdWUodmFsdWUpOwogICAgfSwKICAgIHBlcm1pc3Npb25zKHZhbHVlKSB7CiAgICAgIHJldHVybiBWYWxpZGF0b3IudmFsdWUodmFsdWUpLnJlcXVpcmVkKCk7CiAgICB9LAoKICAgIGRlc2NyaXB0aW9uKHZhbHVlKSB7CiAgICAgIHJldHVybiBWYWxpZGF0b3IudmFsdWUodmFsdWUpLm1pbkxlbmd0aCgzKTsKICAgIH0KICB9LAoKICBhcG9sbG86IHsKICAgIHJvbGVCeUlkKCkgewogICAgICByZXR1cm4gewogICAgICAgIHF1ZXJ5OiByb2xlUXVlcnksCiAgICAgICAgdmFyaWFibGVzKCkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaWQ6IHBhcnNlSW50KHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBmZXRjaFBvbGljeTogIm5ldHdvcmstb25seSIsCiAgICAgICAgcmVzdWx0KHsgZGF0YTogeyByb2xlQnlJZCB9IH0pIHsKICAgICAgICAgIHRoaXMubmFtZSA9IHJvbGVCeUlkLm5hbWU7CiAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gcm9sZUJ5SWQuZGVzY3JpcHRpb247CiAgICAgICAgICB0aGlzLnNsdWcgPSByb2xlQnlJZC5zbHVnOwogICAgICAgICAgdGhpcy50aXRsZSA9IGBlZGl0YDsKICAgICAgICAgIGxldCB1c2VycyA9IFtdOwogICAgICAgICAgcm9sZUJ5SWQudXNlcnMuZm9yRWFjaCh1c2VyID0+IHsKICAgICAgICAgICAgdXNlcnMucHVzaCh1c2VyLmlkKTsKICAgICAgICAgIH0pOwogICAgICAgICAgbGV0IHBlcm1pc3Npb25zID0gW107CiAgICAgICAgICByb2xlQnlJZC5wZXJtaXNzaW9ucy5mb3JFYWNoKHBlciA9PiB7CiAgICAgICAgICAgIHBlcm1pc3Npb25zLnB1c2gocGVyLmlkKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIHRoaXMudXNlcnMgPSB1c2VyczsKICAgICAgICAgIHRoaXMucGVybWlzc2lvbnMgPSBwZXJtaXNzaW9uczsKICAgICAgICB9CiAgICAgIH07CiAgICB9LAogICAgYWxsVXNlcnMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcXVlcnk6IGdxbGAKICAgICAgICAgIHF1ZXJ5IHsKICAgICAgICAgICAgYWxsVXNlcnMgewogICAgICAgICAgICAgIG5hbWUKICAgICAgICAgICAgICBpZAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgYAogICAgICB9OwogICAgfSwKICAgIGFsbFBlcm1pc3Npb25zKCkgewogICAgICByZXR1cm4gewogICAgICAgIHF1ZXJ5OiBncWxgCiAgICAgICAgICBxdWVyeSB7CiAgICAgICAgICAgIGFsbFBlcm1pc3Npb25zIHsKICAgICAgICAgICAgICBuYW1lCiAgICAgICAgICAgICAgaWQKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIGAKICAgICAgfTsKICAgIH0KICB9LAoKICB3YXRjaDogewogICAgInZhbGlkYXRpb24uZXJyb3JzIigpIHsKICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmlucHV0LWZpZWxkIGJ1dHRvbiIpOwogICAgICBpZiAodGhpcy52YWxpZGF0aW9uLmVycm9ycy5sZW5ndGggPiAwKSB7CiAgICAgICAgYnRuLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCAiZGlzYWJsZWQiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXRoaXMucm9sZSkgewogICAgICAgICAgdGhpcy52YWxpZGF0aW9uLnRvdWNoZWRSZWNvcmRzLmxlbmd0aCA+IDEKICAgICAgICAgICAgPyBidG4ucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpCiAgICAgICAgICAgIDogIiI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGJ0bi5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbmFtZSgpIHsKICAgICAgbGV0IHNsdWcgPSB0aGlzLm5hbWUucmVwbGFjZSgiICIsICItIik7CiAgICAgIHNsdWcgPSBzbHVnLnJlcGxhY2UoIiYiLCAiLSIpOwogICAgICBzbHVnID0gc2x1Zy5yZXBsYWNlKCI/IiwgIi0iKTsKICAgICAgc2x1ZyA9IHNsdWcucmVwbGFjZSgiLyIsICItIik7CiAgICAgIHNsdWcgPSBzbHVnLnJlcGxhY2UoIlxcIiwgIi0iKTsKICAgICAgdGhpcy5zbHVnID0gc2x1ZzsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdHRlZCgpIHsKICAgICAgdGhpcy5yb2xlQnlJZCA/IHRoaXMudXBkYXRlUm9sZSgpIDogdGhpcy5jcmVhdGVSb2xlKCk7CiAgICB9LAogICAgbG9hZFNlbGVjdHMoKSB7CiAgICAgIGxldCBzZWxlY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgic2VsZWN0Iik7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIE0uRm9ybVNlbGVjdC5pbml0KHNlbGVjdHMsIHt9KTsKICAgICAgfSwgMjAwMCk7CiAgICB9LAogICAgdXBkYXRlUm9sZSgpIHsKICAgICAgdGhpcy4kYXBvbGxvCiAgICAgICAgLm11dGF0ZSh7CiAgICAgICAgICBtdXRhdGlvbjogdXBkYXRlUm9sZSwKICAgICAgICAgIC8vIFBhcmFtZXRlcnMKICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgICAgIHNsdWc6IHRoaXMuc2x1ZywKICAgICAgICAgICAgaWQ6IHBhcnNlSW50KHRoaXMuJHJvdXRlLnBhcmFtcy5pZCksCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLAogICAgICAgICAgICB1c2VyczogdGhpcy51c2VycywKICAgICAgICAgICAgcGVybWlzc2lvbnM6IHRoaXMucGVybWlzc2lvbnMKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgICAgTS50b2FzdCh7CiAgICAgICAgICAgIGh0bWw6IGAke3RoaXMuJHQoInVwZGF0ZWRfc3VjY2Vzc2Z1bGx5IiwgewogICAgICAgICAgICAgIG5hbWU6IGRhdGEuZGF0YS51cGRhdGVSb2xlLm5hbWUKICAgICAgICAgICAgfSl9YCwKICAgICAgICAgICAgY2xhc3NlczogInN1Y2Nlc3MgdG9hc3QiLAogICAgICAgICAgICBkaXNwbGF5TGVuZ3RoOiAyMDAwCiAgICAgICAgICB9KTsKCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJyb2xlcy5pbmRleCIgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy52YWxpZGF0aW9uRXJyb3IgPSB0aGlzLiR0KCJuYW1lX3VuaXF1ZSIpOwogICAgICAgIH0pOwogICAgfSwKICAgIGNyZWF0ZVJvbGUoKSB7CiAgICAgIHRoaXMuJGFwb2xsbwogICAgICAgIC5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IGNyZWF0ZVJvbGUsCiAgICAgICAgICAvLyBQYXJhbWV0ZXJzCiAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLAogICAgICAgICAgICBzbHVnOiB0aGlzLnNsdWcsCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLAogICAgICAgICAgICB1c2VyczogdGhpcy51c2VycywKICAgICAgICAgICAgcGVybWlzc2lvbnM6IHRoaXMucGVybWlzc2lvbnMKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgICAgTS50b2FzdCh7CiAgICAgICAgICAgIGh0bWw6IGAke3RoaXMuJHQoImNyZWF0ZWRfc3VjY2Vzc2Z1bGx5IiwgewogICAgICAgICAgICAgIG5hbWU6IGRhdGEuZGF0YS5jcmVhdGVSb2xlLm5hbWUKICAgICAgICAgICAgfSl9YCwKICAgICAgICAgICAgY2xhc3NlczogInN1Y2Nlc3MgdG9hc3QiLAogICAgICAgICAgICBkaXNwbGF5TGVuZ3RoOiAzMDAwCiAgICAgICAgICB9KTsKCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJyb2xlcy5pbmRleCIgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgLy9jb25zb2xlLmxvZyhlKQogICAgICAgICAgdGhpcy52YWxpZGF0aW9uRXJyb3IgPSB0aGlzLiR0KCJuYW1lX3VuaXF1ZSIpOwogICAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMubG9hZFNlbGVjdHMoKTsKICB9Cn07Cg=="},{"version":3,"sources":["Create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Create.vue","sourceRoot":"src/views/roles","sourcesContent":["<template>\n  <div class=\"row\">\n    <Breadcrumbs :title=\"title\" :path=\"path\" :fregment=\"fregment\" />\n    <div class=\"col s12 mt-65\">\n      <div class=\"container\">\n        <!-- Current balance & total transactions cards-->\n        <div class=\"row mt-4\">\n          <div class=\"col s12 m12 l12\">\n            <!-- Current Balance -->\n            <h5 class=\"form-title\">\n              <i class=\"material-icons app-header-icon text-top\"\n                >perm_identity</i\n              >\n              {{ $t(title, { fregment }) }}\n            </h5>\n\n            <div class=\"card animated  fadeInLeft \">\n              <div class=\"card-content\">\n                <form @submit.prevent=\"submitted()\">\n                  <div class=\"card-alert danger card\" v-if=\"validationError\">\n                    <div class=\"card-content\">\n                      <p>\n                        <i class=\"material-icons\">error</i>{{ validationError }}\n                      </p>\n                    </div>\n                  </div>\n                  <div class=\"row\">\n                    <div\n                      class=\"input-field col s12\"\n                      :class=\"{ error: validation.hasError('name') }\"\n                    >\n                      <input v-model=\"name\" id=\"name\" type=\"text\" />\n                      <label for=\"name\" :class=\"name ? 'active' : ''\">{{\n                        $t(\"name\")\n                      }}</label>\n                      <div class=\"message\">\n                        {{ validation.firstError(\"name\") }}\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"row\">\n                    <div\n                      class=\"input-field col s12\"\n                      :class=\"{ error: validation.hasError('description') }\"\n                    >\n                      <textarea\n                        v-model=\"description\"\n                        id=\"description\"\n                        class=\"materialize-textarea\"\n                      ></textarea>\n                      <label\n                        for=\"description\"\n                        :class=\"description ? 'active' : ''\"\n                        >{{ $t(\"description\") }}</label\n                      >\n                      <div class=\"message\">\n                        {{ validation.firstError(\"description\") }}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"row\">\n                    <div\n                      class=\"input-field col s12\"\n                      :class=\"{ error: validation.hasError('users') }\"\n                    >\n                      <select id=\"users\" multiple v-model=\"users\">\n                        <option value=\"\" disabled=\"none\">{{\n                          $t(\"select_user\")\n                        }}</option>\n                        <option\n                          v-for=\"user in allUsers\"\n                          :key=\"user.id\"\n                          :value=\"user.id\"\n                          >{{ user.name }}</option\n                        >\n                      </select>\n                      <label for=\"users\" :class=\"users ? 'active' : ''\">{{\n                        $t(\"users\")\n                      }}</label>\n                      <div class=\"message\">\n                        {{ validation.firstError(\"users\") }}\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"row\">\n                    <div\n                      class=\"input-field col s12\"\n                      :class=\"{ error: validation.hasError('permissions') }\"\n                    >\n                      <select id=\"permissions\" multiple v-model=\"permissions\">\n                        <option value=\"\" disabled=\"none\">{{\n                          $t(\"select_permission\")\n                        }}</option>\n                        <option\n                          v-for=\"permission in allPermissions\"\n                          :key=\"permission.id\"\n                          :value=\"permission.id\"\n                          >{{ permission.name }}</option\n                        >\n                      </select>\n                      <label\n                        for=\"permissions\"\n                        :class=\"permissions ? 'active' : ''\"\n                        >{{ $t(\"permissions\") }}</label\n                      >\n                      <div class=\"message\">\n                        {{ validation.firstError(\"permissions\") }}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"row\">\n                    <div class=\"input-field col s12\">\n                      <button\n                        class=\"btn create cyan waves-effect waves-light left\"\n                        type=\"submit\"\n                        name=\"action\"\n                        disabled=\"disabled\"\n                      >\n                        {{ $t(\"save\") }}\n                        <i class=\"material-icons right\">send</i>\n                      </button>\n                    </div>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport Breadcrumbs from \"@/components/layouts/Breadcrumbs.vue\";\nimport M from \"materialize-css\";\nimport SimpleVueValidation from \"simple-vue-validator\";\nimport {\n  createRole,\n  updateRole,\n  roleQuery\n} from \"@/graphql/queries/queries.js\";\nconst Validator = SimpleVueValidation.Validator;\nimport gql from \"graphql-tag\";\nexport default {\n  name: \"edit-add-roles\",\n  components: {\n    Breadcrumbs\n  },\n  data() {\n    return {\n      path: [{ title: \"roles\", route: \"roles.index\" }],\n      roleById: {},\n      name: \"\",\n      slug: \"\",\n      description: \"\",\n      allUsers: \"\",\n      allPermissions: [],\n      users: [],\n      permissions: [],\n      title: \"create_role\",\n      validationError: \"\",\n      fregment: \"\"\n    };\n  },\n  validators: {\n    name(value) {\n      return Validator.value(value)\n        .required()\n        .minLength(3);\n    },\n    users(value) {\n      return Validator.value(value);\n    },\n    permissions(value) {\n      return Validator.value(value).required();\n    },\n\n    description(value) {\n      return Validator.value(value).minLength(3);\n    }\n  },\n\n  apollo: {\n    roleById() {\n      return {\n        query: roleQuery,\n        variables() {\n          return {\n            id: parseInt(this.$route.params.id)\n          };\n        },\n        fetchPolicy: \"network-only\",\n        result({ data: { roleById } }) {\n          this.name = roleById.name;\n          this.description = roleById.description;\n          this.slug = roleById.slug;\n          this.title = `edit`;\n          let users = [];\n          roleById.users.forEach(user => {\n            users.push(user.id);\n          });\n          let permissions = [];\n          roleById.permissions.forEach(per => {\n            permissions.push(per.id);\n          });\n\n          this.users = users;\n          this.permissions = permissions;\n        }\n      };\n    },\n    allUsers() {\n      return {\n        query: gql`\n          query {\n            allUsers {\n              name\n              id\n            }\n          }\n        `\n      };\n    },\n    allPermissions() {\n      return {\n        query: gql`\n          query {\n            allPermissions {\n              name\n              id\n            }\n          }\n        `\n      };\n    }\n  },\n\n  watch: {\n    \"validation.errors\"() {\n      const btn = document.querySelector(\".input-field button\");\n      if (this.validation.errors.length > 0) {\n        btn.setAttribute(\"disabled\", \"disabled\");\n      } else {\n        if (!this.role) {\n          this.validation.touchedRecords.length > 1\n            ? btn.removeAttribute(\"disabled\")\n            : \"\";\n        } else {\n          btn.removeAttribute(\"disabled\");\n        }\n      }\n    },\n    name() {\n      let slug = this.name.replace(\" \", \"-\");\n      slug = slug.replace(\"&\", \"-\");\n      slug = slug.replace(\"?\", \"-\");\n      slug = slug.replace(\"/\", \"-\");\n      slug = slug.replace(\"\\\\\", \"-\");\n      this.slug = slug;\n    }\n  },\n  methods: {\n    submitted() {\n      this.roleById ? this.updateRole() : this.createRole();\n    },\n    loadSelects() {\n      let selects = document.querySelectorAll(\"select\");\n      setTimeout(() => {\n        M.FormSelect.init(selects, {});\n      }, 2000);\n    },\n    updateRole() {\n      this.$apollo\n        .mutate({\n          mutation: updateRole,\n          // Parameters\n          variables: {\n            name: this.name,\n            slug: this.slug,\n            id: parseInt(this.$route.params.id),\n            description: this.description,\n            users: this.users,\n            permissions: this.permissions\n          }\n        })\n        .then(data => {\n          M.toast({\n            html: `${this.$t(\"updated_successfully\", {\n              name: data.data.updateRole.name\n            })}`,\n            classes: \"success toast\",\n            displayLength: 2000\n          });\n\n          this.$router.push({ name: \"roles.index\" });\n        })\n        .catch(() => {\n          this.validationError = this.$t(\"name_unique\");\n        });\n    },\n    createRole() {\n      this.$apollo\n        .mutate({\n          mutation: createRole,\n          // Parameters\n          variables: {\n            name: this.name,\n            slug: this.slug,\n            description: this.description,\n            users: this.users,\n            permissions: this.permissions\n          }\n        })\n        .then(data => {\n          M.toast({\n            html: `${this.$t(\"created_successfully\", {\n              name: data.data.createRole.name\n            })}`,\n            classes: \"success toast\",\n            displayLength: 3000\n          });\n\n          this.$router.push({ name: \"roles.index\" });\n        })\n        .catch(() => {\n          //console.log(e)\n          this.validationError = this.$t(\"name_unique\");\n        });\n    }\n  },\n  mounted() {\n    this.loadSelects();\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.form-title {\n  font-weight: 700;\n  line-height: 3.6rem;\n  font-size: 2.64rem;\n  margin-bottom: 5rem;\n  & i {\n    font-size: 3.6rem;\n    vertical-align: bottom;\n  }\n}\n\nlabel {\n  font-size: 1.6rem !important;\n}\ninput,\n.checkbox span:not(.lever),\ntextarea,\nselect {\n  font-size: 1.6rem !important;\n  height: 4.2rem !important;\n}\n.checkbox {\n  position: relative;\n}\n</style>\n"]}]}