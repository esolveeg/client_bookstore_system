{"remainingRequest":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/src/components/datatable/DataTable.vue?vue&type=style&index=0&id=1891322b&lang=scss&scoped=true&","dependencies":[{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/src/components/datatable/DataTable.vue","mtime":1609793656242},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/css-loader/dist/cjs.js","mtime":1609793563666},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1609793558725},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/postcss-loader/src/index.js","mtime":1609793563619},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/sass-loader/dist/cjs.js","mtime":1609793534511},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/cache-loader/dist/cjs.js","mtime":1609793563794},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/vue-loader/lib/index.js","mtime":1609793558535}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi50YWJsZUZpbHRlcnMgewogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogIG1hcmdpbjogM3JlbSAwOwoKICAmIC5pbnB1dC1maWVsZCB7CiAgICB3aWR0aDogODBweDsKICB9CiAgJiAuc2VhcmNoLWlucHV0LWZpZWxkIHsKICAgIHdpZHRoOiAyMDBweDsKICB9Cn0KCi5zZWxlY3Qtd3JhcHBlciArIGxhYmVsIHsKICBmb250LXNpemU6IDFyZW07Cn0KdGJvZHkgdHIgdGQ6bm90KDpsYXN0LWNoaWxkKSB7CiAgZm9udC1mYW1pbHk6ICJNdWxpIiwgc2Fucy1zZXJpZiAhaW1wb3J0YW50Owp9Ci5idG46bm90KDpsYXN0LWNoaWxkKSB7CiAgbWFyZ2luLWlubGluZS1lbmQ6IDFyZW07CiAgQG1lZGlhIHNjcmVlbiBBbmQgKG1heC13aWR0aDogMTIwMHB4KSB7CiAgICBtYXJnaW4tYmxvY2stZW5kOiAxcmVtOwogICAgbWFyZ2luLWlubGluZS1lbmQ6IDA7CiAgfQogIEBtZWRpYSBzY3JlZW4gQU5EIChtYXgtd2lkdGg6IDk5MnB4KSB7CiAgICBtYXJnaW4tYmxvY2stZW5kOiAwcmVtOwogIH0KfQouYnRuLnZpZXcgewogIGJhY2tncm91bmQtY29sb3I6ICMzNDNhNDA7Cn0KLmJ0bi5hcHByb3ZlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmY0MDgxOwp9Ci5idG4gc3BhbiB7CiAgY29sb3I6ICNmZmY7Cn0KLm5vdC1mb3VuZCB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBtYXJnaW46IDJyZW0gMDsKICB3aWR0aDogMTAwJTsKICBmb250LXNpemU6IDEuNnJlbTsKfQoudGFibGVGaWx0ZXJzIC50YWJsZUZpbHRlcnMtZmxleCB7CiAgZGlzcGxheTogZmxleDsKICAmIGRpdjpub3QoOmxhc3QtY2hpbGQpIHsKICAgIG1hcmdpbi1pbmxpbmUtZW5kOiA1MHB4OwogIH0KfQphIHsKICBjdXJzb3I6IHBvaW50ZXI7CiAgdXNlci1zZWxlY3Q6IG5vbmU7Cn0KLmZsZXgtY2VudGVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgZmxleC13cmFwOiB3cmFwOwp9Ci5tdC0zMCB7CiAgbWFyZ2luLXRvcDogMzBweDsKfQoucGFnZS1zdGF0ZSB7CiAgbWFyZ2luLWlubGluZS1lbmQ6IDJyZW07Cn0KdHIuZGFuZ2VyMiB7CiAgY29sb3I6ICM3MjFjMjQ7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZDdkYTsKICBib3JkZXItY29sb3I6ICNmNWM2Y2I7Cn0K"},{"version":3,"sources":["DataTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiYA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DataTable.vue","sourceRoot":"src/components/datatable","sourcesContent":["<template>\n  <div class=\"card animated  fadeInUp \">\n    <div class=\"card-content\" style=\"overflow-x:scroll\">\n      <div>\n        <div>\n          <div class=\"tableFilters\">\n            <div class=\"tableFilters-flex\" style=\"display:flex\">\n              <div class=\"search-input-field\">\n                <input\n                  class=\"input\"\n                  @input=\"dataTable.search($event.target.value)\"\n                  :value=\"dataTable.params.search\"\n                  type=\"text\"\n                  :placeholder=\"$t('search_table')\"\n                />\n              </div>\n              <div\n                class=\"input-field \"\n                style=\"width:100%\"\n                v-for=\"filter in selects\"\n                :key=\"filter.param\"\n              >\n                <select\n                  id=\"branches\"\n                  @change=\"dataTable.filterData($event.target.value, filter)\"\n                  v-model=\"dataTable.params.branch\"\n                >\n                  <option value=\"\" disabled=\"none\">{{ $t(\"branches\") }}</option>\n                  <option value=\"\">{{ $t(\"none\") }}</option>\n                  <option value=\"store\">{{ $t(\"store\") }}</option>\n                  <option\n                    :value=\"val.id\"\n                    v-for=\"val in filter.data\"\n                    :key=\"val.id\"\n                    >{{ val.name }}</option\n                  >\n                </select>\n                <label for=\"branches\">{{ $t(\"branches\") }}</label>\n              </div>\n              <div class=\"switch\" v-for=\"filter in switchers\" :key=\"filter.id\">\n                <label>\n                  {{ filter.name }}\n                  <input\n                    type=\"checkbox\"\n                    v-model=\"filter.value\"\n                    @change=\"dataTable.filterData(filter.value, filter)\"\n                  />\n                  <span class=\"lever\"></span>\n                </label>\n              </div>\n              <div\n                class=\"input-field\"\n                style=\"width:100%\"\n                v-for=\"filter in dates\"\n                :key=\"filter.id\"\n              >\n                <div class=\"datepicker-trigger\">\n                  <input\n                    type=\"text\"\n                    id=\"datepicker-trigger\"\n                    placeholder=\"Select dates\"\n                  />\n\n                  <AirbnbStyleDatepicker\n                    :trigger-element-id=\"'datepicker-trigger'\"\n                    :mode=\"'range'\"\n                    :fullscreen-mobile=\"true\"\n                    :endDate=\"new Date()\"\n                    @date-one-selected=\"\n                      (val) => {\n                        dateOneSelected(val);\n                      }\n                    \"\n                    @date-two-selected=\"\n                      (val) => {\n                        dateTwoSelected(val);\n                      }\n                    \"\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div class=\"input-field\">\n              <select\n                id=\"show\"\n                @change=\"dataTable.changeCount($event.target.value)\"\n              >\n                <option value=\"10\">10</option>\n                <option value=\"20\">20</option>\n                <option value=\"30\">30</option>\n                <option value=\"50\">50</option>\n                <option value=\"100\">100</option>\n                <option value=\"200\">200</option>\n              </select>\n              <label>{{ $t(\"show\") }}</label>\n            </div>\n          </div>\n          <table class=\"table data-table\">\n            <thead>\n              <tr>\n                <th>\n                  <label class=\"checkbox\">\n                    <input\n                      id=\"selectAll\"\n                      type=\"checkbox\"\n                      v-model=\"dataTable.allChecked\"\n                      @change=\"dataTable.selectAll()\"\n                    />\n                    <span></span>\n                  </label>\n                </th>\n                <!-- <th\n          v-for=\"column in columns\"\n          :key=\"column.name\"\n          @click=\"$emit('sort', column.name)\"\n          :class=\"sortKey === column.name ? sortOrder : 'sorting'\"\n          :style=\"'width:' + column.width + ';' + 'cursor:pointer;'\"\n        >\n          {{ $t(`${column.label}`) }}\n        </th> -->\n\n                <th\n                  v-for=\"column in dataTable.columns\"\n                  @click=\"dataTable.sort(column)\"\n                  :key=\"column\"\n                >\n                  {{ $t(column) }}\n                </th>\n                <th>\n                  {{ $t(\"actions\") }}\n                </th>\n              </tr>\n            </thead>\n            <tbody v-if=\"!dataTable.isLoading\">\n              <div v-if=\"dataTable.totalRows == 0\">\n                {{ $t(\"no-data\") }}\n              </div>\n              <tr\n                v-else\n                v-for=\"val in dataTable.data\"\n                :key=\"val.id\"\n                :class=\"{\n                  danger: tableName == 'orders' && val.deleted_at !== null,\n                  danger2: tableName == 'products' && val.qty < 0,\n                }\"\n              >\n                <td>\n                  <label>\n                    <input\n                      class=\"checkbox\"\n                      type=\"checkbox\"\n                      name=\"checkbox[]\"\n                      @change=\"dataTable.select()\"\n                      :value=\"val[identifer]\"\n                      v-model=\"dataTable.checkedItems\"\n                    />\n                    <span></span>\n                  </label>\n                </td>\n                <td v-for=\"column in dataTable.columns\" :key=\"column\">\n                  {{ val[column] }}\n                </td>\n                <td>\n                  <a\n                    v-if=\"dataTable.canView\"\n                    @click.prevent=\"\n                      $router.push({\n                        name: `${tableName}.view`,\n                        params: { id: parseInt(val.id) },\n                      })\n                    \"\n                    class=\"btn waves-effect waves-light actions-btn view\"\n                    ><i class=\"material-icons hide-on-med-and-up bold\"\n                      >remove_red_eye</i\n                    ><span class=\"hide-on-small-onl text-white\"\n                      >{{ $t(\"plain_view\") }}\n                      <i class=\"material-icons\">remove_red_eye</i></span\n                    ></a\n                  >\n                  <a\n                    v-if=\"dataTable.canEdit\"\n                    @click.prevent=\"\n                      $router.push({\n                        name: `${tableName}.edit`,\n                        params: { id: val.id },\n                      })\n                    \"\n                    class=\"btn waves-effect waves-light actions-btn edit\"\n                    ><i class=\"material-icons hide-on-med-and-up bold\">edit</i\n                    ><span class=\"hide-on-small-onl text-white\"\n                      >{{ $t(\"plain_edit\") }}\n                      <i class=\"material-icons\">edit</i></span\n                    ></a\n                  >\n                  <a\n                    v-if=\"tableName == 'transactions' && val.approved == 0\"\n                    @click.prevent=\"\n                      $router.push({\n                        name: `${tableName}.approve`,\n                        params: { id: val.id },\n                      })\n                    \"\n                    class=\"btn waves-effect waves-light actions-btn approve\"\n                    ><i class=\"material-icons hide-on-med-and-up bold\"\n                      >done_all</i\n                    ><span class=\"hide-on-small-onl text-white\"\n                      >{{ $t(\"approve\") }}\n                      <i class=\"material-icons\">done_all</i></span\n                    ></a\n                  >\n                  <a\n                    v-if=\"tableName == 'orders' && val.deleted_at == null\"\n                    @click.prevent=\"refundOrder(val.id)\"\n                    class=\"btn waves-effect waves-light actions-btn teal\"\n                    ><i class=\"material-icons hide-on-med-and-up bold\"\n                      >keyboard_return</i\n                    ><span class=\"hide-on-small-onl text-white\"\n                      >{{ $t(\"refund\") }}\n                      <i class=\"material-icons\">keyboard_return</i></span\n                    ></a\n                  >\n                  <a\n                    v-if=\"dataTable.canDelete\"\n                    @click.prevent=\"\n                      dataTable.delete($modal, { id: val.id, name: val.name })\n                    \"\n                    class=\"btn waves-effect waves-light actions-btn danger\"\n                    ><i class=\"material-icons hide-on-med-and-up bold\">delete</i\n                    ><span class=\"hide-on-small-onl text-white\"\n                      >{{ $t(\"delete\") }}\n                      <i class=\"material-icons\">delete</i></span\n                    ></a\n                  >\n                </td>\n              </tr>\n            </tbody>\n            <tfoot v-if=\"dataTable.total !== 0\">\n              <tr>\n                <td>total : {{ dataTable.total }}</td>\n              </tr>\n            </tfoot>\n          </table>\n          <ul class=\"pagination flex-center mt-30\">\n            <span\n              class=\"page-state\"\n              v-if=\"\n                dataTable.params.offset + 1 + dataTable.params.no <\n                  dataTable.totalRows\n              \"\n              >{{\n                `from ${dataTable.params.offset + 1} to ${dataTable.params\n                  .offset +\n                  1 +\n                  dataTable.params.no} of ${dataTable.totalRows}`\n              }}\n            </span>\n            <span class=\"page-state\" v-else\n              >{{\n                `from ${dataTable.params.offset + 1} to ${\n                  dataTable.totalRows\n                } of ${dataTable.totalRows}`\n              }}\n            </span>\n            <li class=\"flex-center\" @click=\"dataTable.prev()\">\n              <a class=\"flex-center\"\n                ><i class=\"material-icons\">chevron_left</i></a\n              >\n            </li>\n            <li class=\"waves-effect\">\n              <a>{{ dataTable.currentPage }}</a>\n            </li>\n\n            <li class=\"flex-center\" @click=\"dataTable.next()\">\n              <a class=\"flex-center\"\n                ><i class=\"material-icons\">chevron_right</i></a\n              >\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// import DataTable from \"@/classes/DataTable.js\";\nimport DataTable from \"@/classes/DataTable.js\";\nimport M from \"materialize-css\";\nimport store from \"@/store/index\";\nimport { setTimeout } from \"timers\";\nexport default {\n  name: \"databTable\",\n  data() {\n    return {\n      title: \"products\",\n      btns: [],\n\n      dateOne: \"\",\n      dateTwo: \"\",\n      dataTable: new DataTable(\n        {\n          offset: 0,\n          to: \"\",\n          from: \"\",\n          no: 10,\n          branch: \"\",\n          sort_by: \"\",\n          sort_func: \"\",\n          search: \"\",\n        },\n        this.url,\n        this.execlude,\n        this.filters,\n        this.tableName,\n      ),\n    };\n  },\n  props: [\"url\", \"execlude\", \"tableName\", \"filters\", \"identifer\"],\n  computed: {\n    selects() {\n      return this.dataTable.filters.filter((filter) => {\n        return filter.type == \"select\";\n      });\n    },\n    dates() {\n      return this.dataTable.filters.filter((filter) => {\n        return filter.type == \"date\";\n      });\n    },\n    switchers() {\n      return this.dataTable.filters.filter((filter) => {\n        return filter.type == \"switcher\";\n      });\n    },\n  },\n  methods: {\n    getData() {\n      this.dataTable.getData();\n    },\n    refundOrder(id) {\n      store.commit(\"order/SetRefundedOrder\", id);\n      this.$modal.show(\"modal-refund\");\n    },\n    dateOneSelected(val) {\n      if (val) {\n        this.dataTable.fromSelected(val);\n        localStorage.setItem(`${this.url}_from`, val);\n      }\n    },\n    dateTwoSelected(val) {\n      if (val) {\n        this.dataTable.toSelected(val);\n        localStorage.setItem(`${this.url}_to`, val);\n      }\n    },\n    loadSelects() {\n      let selects = document.querySelectorAll(\"select\");\n      selects.forEach((select) => {\n        setTimeout(() => {\n          M.FormSelect.init(select, {});\n        }, 2000);\n      });\n    },\n  },\n  created() {\n    this.getData();\n    let branch = localStorage.getItem(\"branch\")\n      ? localStorage.getItem(\"branch\")\n      : \"\";\n    if (branch) {\n      this.dataTable.params[`branch`] = branch;\n    }\n  },\n  mounted() {\n    this.dataTable.getFiltersData().then(() => {\n      setTimeout(() => {\n        this.loadSelects();\n      }, 3000);\n    });\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.tableFilters {\n  display: flex;\n  justify-content: space-between;\n  margin: 3rem 0;\n\n  & .input-field {\n    width: 80px;\n  }\n  & .search-input-field {\n    width: 200px;\n  }\n}\n\n.select-wrapper + label {\n  font-size: 1rem;\n}\ntbody tr td:not(:last-child) {\n  font-family: \"Muli\", sans-serif !important;\n}\n.btn:not(:last-child) {\n  margin-inline-end: 1rem;\n  @media screen And (max-width: 1200px) {\n    margin-block-end: 1rem;\n    margin-inline-end: 0;\n  }\n  @media screen AND (max-width: 992px) {\n    margin-block-end: 0rem;\n  }\n}\n.btn.view {\n  background-color: #343a40;\n}\n.btn.approve {\n  background-color: #ff4081;\n}\n.btn span {\n  color: #fff;\n}\n.not-found {\n  position: absolute;\n  text-align: center;\n  margin: 2rem 0;\n  width: 100%;\n  font-size: 1.6rem;\n}\n.tableFilters .tableFilters-flex {\n  display: flex;\n  & div:not(:last-child) {\n    margin-inline-end: 50px;\n  }\n}\na {\n  cursor: pointer;\n  user-select: none;\n}\n.flex-center {\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n}\n.mt-30 {\n  margin-top: 30px;\n}\n.page-state {\n  margin-inline-end: 2rem;\n}\ntr.danger2 {\n  color: #721c24;\n  background-color: #f8d7da;\n  border-color: #f5c6cb;\n}\n</style>\n"]}]}