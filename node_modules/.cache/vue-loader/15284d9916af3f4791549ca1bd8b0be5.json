{"remainingRequest":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/src/components/layouts/AppHeader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/src/components/layouts/AppHeader.vue","mtime":1609793656351},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/cache-loader/dist/cjs.js","mtime":1609793563794},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/babel-loader/lib/index.js","mtime":1609793590147},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/cache-loader/dist/cjs.js","mtime":1609793563794},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/vue-loader/lib/index.js","mtime":1609793558535}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG9uTG9nb3V0IH0gZnJvbSAiLi4vLi4vdnVlLWFwb2xsby5qcyI7CmltcG9ydCB7IG1lUXVlcnkgfSBmcm9tICJAL2dyYXBocWwvcXVlcmllcy9xdWVyaWVzLmpzIjsKaW1wb3J0IE0gZnJvbSAibWF0ZXJpYWxpemUtY3NzIjsKZXhwb3J0IGRlZmF1bHQgewogIGFwb2xsbzogewogICAgbWU6IHsKICAgICAgcXVlcnk6IG1lUXVlcnksCiAgICAgIHJlc3VsdCh7IGRhdGE6IHsgbWUgfSB9KSB7CiAgICAgICAgbGV0IHBlcm1pc3Npb25zID0gW107CiAgICAgICAgdGhpcy51c2VySWQgPSBtZS5pZDsKICAgICAgICBtZS5yb2xlcy5mb3JFYWNoKHJvbGUgPT4gewogICAgICAgICAgdGhpcy5yb2xlcy5wdXNoKHJvbGUuc2x1Zyk7CiAgICAgICAgICByb2xlLnBlcm1pc3Npb25zLmZvckVhY2gocGVyID0+IHsKICAgICAgICAgICAgcGVybWlzc2lvbnMucHVzaChwZXIuc2x1Zyk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBpZiAodGhpcy5yb2xlcy5pbmNsdWRlcygicG9zIikpIHsKICAgICAgICAgIHRoaXMuYnJhbmNoX2lkID0gbWUuZW1wbG95ZWUuYnJhbmNoLmlkOwogICAgICAgIH0KICAgICAgICB0aGlzLnBlcm1pc3Npb25zID0gcGVybWlzc2lvbnM7CiAgICAgICAgdGhpcy5pc1BvcyA9IHRoaXMucm9sZXMuaW5jbHVkZXMoInBvcyIpID8gdHJ1ZSA6IGZhbHNlOwogICAgICB9CiAgICB9CiAgfSwKICBzdG9yZTogewogICAgaXNQb3M6ICJpc1BvcyIsCiAgICBicmFuY2hfaWQ6ICJicmFuY2hfaWQiLAogICAgdXNlcklkOiAidXNlcklkIiwKICAgIHBlcm1pc3Npb25zOiAicGVybWlzc2lvbnMiLAogICAgcm9sZXM6ICJyb2xlcyIsCiAgICBtZTogIm1lIgogIH0sCiAgbWV0aG9kczogewogICAgdG9nZ2xlU2VhcmNoOiAoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMubWUpOwogICAgICBsZXQgc2VhcmNoQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnNlYXJjaC1zbSIpOwogICAgICBzZWFyY2hCb3guY2xhc3NMaXN0LnRvZ2dsZSgiaGlkZSIpOwogICAgfSwKICAgIGxvZ291dCgpIHsKICAgICAgb25Mb2dvdXQodGhpcy4kYXBvbGxvLnByb3ZpZGVyLmRlZmF1bHRDbGllbnQpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgicGVybWlzc29ucyIpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidG9rZW4iKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImJyYW5jaCIpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiYWxsYnJhbmNoZXMiKTsKCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgIH0sCiAgICBzZXRMb2NhbGUoKSB7CiAgICAgIHRoaXMuJGkxOG4ubG9jYWxlID0gdGhpcy4kaTE4bi5sb2NhbGUgPT0gImVuIiA/ICJhciIgOiAiZW4iOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibG9jYWxlIiwgdGhpcy4kaTE4bi5sb2NhbGUpOwogICAgICBjb25zdCBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaHRtbCIpOwogICAgICBpZiAodGhpcy4kaTE4bi5sb2NhbGUgPT0gImFyIikgewogICAgICAgIGh0bWwuY2xhc3NMaXN0LmFkZCgicnRsIik7CiAgICAgICAgaHRtbC5zZXRBdHRyaWJ1dGUoImxhbmciLCAiYXIiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBodG1sLmNsYXNzTGlzdC5yZW1vdmUoInJ0bCIpOwogICAgICAgIGh0bWwuc2V0QXR0cmlidXRlKCJsYW5nIiwgImVuIik7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBsZXQgZHJvcGRvd25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmRyb3Bkb3duLXRyaWdnZXIiKTsKICAgIE0uRHJvcGRvd24uaW5pdChkcm9wZG93bnMsIHsKICAgICAgYWxpZ25tZW50OiAicmlnaHQiLAogICAgICBjb3ZlclRyaWdnZXI6IGZhbHNlCiAgICB9KTsKICB9Cn07Cg=="},{"version":3,"sources":["AppHeader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AppHeader.vue","sourceRoot":"src/components/layouts","sourcesContent":["<template>\n  <header class=\"page-topbar\" id=\"header\">\n    <div class=\"navbar navbar-fixed\">\n      <nav\n        class=\"navbar-main navbar-color nav-collapsible sideNav-lock navbar-dark gradient-45deg-indigo-purple no-shadow\"\n      >\n        <div class=\"nav-wrapper\">\n          <div class=\"header-search-wrapper hide-on-med-and-down\">\n            <i class=\"material-icons\">search</i>\n            <input\n              class=\"header-search-input z-depth-2\"\n              type=\"text\"\n              name=\"Search\"\n              :placeholder=\"$t('search')\"\n            />\n          </div>\n          <ul class=\"navbar-list right\">\n            <li>\n              <a\n                @click.prevent=\"setLocale()\"\n                class=\"waves-effect waves-block waves-light translation-button\"\n                ><span class=\"flag-icon\"></span\n              ></a>\n            </li>\n            <li class=\"hide-on-med-and-down\">\n              <a class=\"waves-effect waves-block waves-light toggle-fullscreen\"\n                ><i class=\"material-icons\">settings_overscan</i></a\n              >\n            </li>\n            <li class=\"hide-on-large-only\" @click=\"toggleSearch\">\n              <a class=\"waves-effect waves-block waves-light search-button\"\n                ><i class=\"material-icons\">search</i></a\n              >\n            </li>\n            <li>\n              <a\n                class=\"dropdown-trigger waves-effect waves-block waves-light profile-button\"\n                data-target=\"profile-dropdown\"\n                ><span class=\"avatar-status\"\n                  ><img\n                    src=\"https://pixinvent.com/materialize-material-design-admin-template/app-assets/images/avatar/avatar-7.png\"\n                    alt=\"avatar\"/></span\n              ></a>\n              <ul class=\"dropdown-content\" id=\"profile-dropdown\">\n                <li>\n                  <a @click.prevent=\"logout()\" class=\"grey-text text-darken-1\"\n                    ><i class=\"material-icons\">keyboard_tab</i>\n                    {{ $t(\"logout\") }}</a\n                  >\n                </li>\n              </ul>\n            </li>\n          </ul>\n        </div>\n        <nav class=\"search-sm hide\">\n          <div class=\"nav-wrapper\">\n            <form>\n              <div class=\"input-field\">\n                <input class=\"search-box-sm\" type=\"search\" required=\"\" />\n                <label class=\"label-icon\" for=\"search\"\n                  ><i class=\"material-icons search-sm-icon\">search</i></label\n                >\n                <i class=\"material-icons search-sm-close\" @click=\"toggleSearch\"\n                  >close</i\n                >\n              </div>\n            </form>\n          </div>\n        </nav>\n      </nav>\n    </div>\n  </header>\n</template>\n<script>\nimport { onLogout } from \"../../vue-apollo.js\";\nimport { meQuery } from \"@/graphql/queries/queries.js\";\nimport M from \"materialize-css\";\nexport default {\n  apollo: {\n    me: {\n      query: meQuery,\n      result({ data: { me } }) {\n        let permissions = [];\n        this.userId = me.id;\n        me.roles.forEach(role => {\n          this.roles.push(role.slug);\n          role.permissions.forEach(per => {\n            permissions.push(per.slug);\n          });\n        });\n        if (this.roles.includes(\"pos\")) {\n          this.branch_id = me.employee.branch.id;\n        }\n        this.permissions = permissions;\n        this.isPos = this.roles.includes(\"pos\") ? true : false;\n      }\n    }\n  },\n  store: {\n    isPos: \"isPos\",\n    branch_id: \"branch_id\",\n    userId: \"userId\",\n    permissions: \"permissions\",\n    roles: \"roles\",\n    me: \"me\"\n  },\n  methods: {\n    toggleSearch: () => {\n      console.log(this.me);\n      let searchBox = document.querySelector(\".search-sm\");\n      searchBox.classList.toggle(\"hide\");\n    },\n    logout() {\n      onLogout(this.$apollo.provider.defaultClient);\n      localStorage.removeItem(\"permissons\");\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"branch\");\n      localStorage.removeItem(\"allbranches\");\n\n      this.$router.push(\"/login\");\n    },\n    setLocale() {\n      this.$i18n.locale = this.$i18n.locale == \"en\" ? \"ar\" : \"en\";\n      localStorage.setItem(\"locale\", this.$i18n.locale);\n      const html = document.querySelector(\"html\");\n      if (this.$i18n.locale == \"ar\") {\n        html.classList.add(\"rtl\");\n        html.setAttribute(\"lang\", \"ar\");\n      } else {\n        html.classList.remove(\"rtl\");\n        html.setAttribute(\"lang\", \"en\");\n      }\n    }\n  },\n  mounted() {\n    let dropdowns = document.querySelectorAll(\".dropdown-trigger\");\n    M.Dropdown.init(dropdowns, {\n      alignment: \"right\",\n      coverTrigger: false\n    });\n  }\n};\n</script>\n\n<style scoped>\n@import url(\"../../sass/layouts/_header.min.css\");\n</style>\n"]}]}