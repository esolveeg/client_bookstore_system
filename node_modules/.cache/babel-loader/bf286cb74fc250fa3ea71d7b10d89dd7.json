{"remainingRequest":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/babel-loader/lib/index.js!/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/eslint-loader/index.js??ref--13-0!/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/src/classes/Form.js","dependencies":[{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/src/classes/Form.js","mtime":1609793655977},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/cache-loader/dist/cjs.js","mtime":1609793563794},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/babel-loader/lib/index.js","mtime":1609793590147},{"path":"/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/node_modules/eslint-loader/index.js","mtime":1609793554208}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvYWhtZWQvYWhtZWRhc2hyYWZkZXZ2L2Vzb2x2ZWVnL3Byb2plY3RzL2Jvb2tzdG9yZV9zeXN0ZW0vY2xpZW50L3N5c3RlbWZpbmFsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9haG1lZC9haG1lZGFzaHJhZmRldnYvZXNvbHZlZWcvcHJvamVjdHMvYm9va3N0b3JlX3N5c3RlbS9jbGllbnQvc3lzdGVtZmluYWwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgRXJyb3JzIGZyb20gIi4vRXJyb3JzIjsKaW1wb3J0IGh0dHAgZnJvbSAiLi4vYXhpb3MvaW5kZXgiOwoKdmFyIEZvcm0gPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBGb3JtKGRhdGEpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGb3JtKTsKCiAgICB0aGlzLm9yaWdpbmFsRGF0YSA9IGRhdGE7CgogICAgZm9yICh2YXIgZmllbGQgaW4gZGF0YSkgewogICAgICB0aGlzW2ZpZWxkXSA9IGRhdGFbZmllbGRdOwogICAgfQoKICAgIHRoaXMuZXJyb3JzID0gbmV3IEVycm9ycygpOwogICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICB9CgogIF9jcmVhdGVDbGFzcyhGb3JtLCBbewogICAga2V5OiAidmFsaWRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbGlkYXRlKCkgey8vIGNvbnNvbGUubG9nKHRoaXMudmFsaWRhdGlvbikKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXNldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIGZvciAodmFyIGZpZWxkIGluIHRoaXMub3JpZ2luYWxEYXRhKSB7CiAgICAgICAgdGhpc1tmaWVsZF0gPSAiIjsKICAgICAgfQoKICAgICAgdGhpcy5lcnJvcnMuY2xlYXIoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwb3N0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwb3N0KHVybCkgewogICAgICByZXR1cm4gdGhpcy5zdWJtaXQoInBvc3QiLCB1cmwpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0KHVybCkgewogICAgICByZXR1cm4gdGhpcy5zdWJtaXQoImdldCIsIHVybCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicGF0Y2giLAogICAgdmFsdWU6IGZ1bmN0aW9uIHBhdGNoKHVybCkgewogICAgICByZXR1cm4gdGhpcy5zdWJtaXQoInBhdGNoIiwgdXJsKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZWxldGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUodXJsKSB7CiAgICAgIHJldHVybiB0aGlzLnN1Ym1pdCgiZGVsZXRlIiwgdXJsKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHB1dCh1cmwpIHsKICAgICAgcmV0dXJuIHRoaXMuc3VibWl0KCJwdXQiLCB1cmwpOwogICAgfQogIH0sIHsKICAgIGtleTogImRhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICAgIHZhciBkYXRhID0ge307CgogICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiB0aGlzLm9yaWdpbmFsRGF0YSkgewogICAgICAgIGRhdGFbcHJvcGVydHldID0gdGhpc1twcm9wZXJ0eV07CiAgICAgIH0KCiAgICAgIHJldHVybiBkYXRhOwogICAgfQogIH0sIHsKICAgIGtleTogInN1Ym1pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3VibWl0KHJlcXVlc3RUeXBlLCB1cmwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX3RoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgICBodHRwW3JlcXVlc3RUeXBlXSh1cmwsIF90aGlzLmRhdGEoKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzLm9uU3VjY2VzcygpOwoKICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBfdGhpcy5vbkZhaWwoZXJyb3IucmVzcG9uc2UuZGF0YSk7CgogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25TdWNjZXNzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblN1Y2Nlc3MoKSB7CiAgICAgIHRoaXMucmVzZXQoKTsgLy8gdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgLy8gdGhpcy5pc0xvYWRpbmcoZmFsc2UpCiAgICB9CiAgfSwgewogICAga2V5OiAib25GYWlsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkZhaWwoZXJyb3IpIHsKICAgICAgaWYgKGVycm9yW1siZXJyb3JzIl1dKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coZXJyb3JbWydlcnJvciddXSkKICAgICAgICAvLyB0aGlzLmVycm9ycy5yZWNvcmQoZXJyb3JbWyJlcnJvcnMiXV0pOwogICAgICAgIC8vIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmVycm9ycy5yZWNvcmQoewogICAgICAgIGdlbmVyYWw6IGVycm9yW1sibWVzc2FnZSJdXQogICAgICB9KTsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgIH0KICB9XSk7CgogIHJldHVybiBGb3JtOwp9KCk7CgpleHBvcnQgeyBGb3JtIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/home/ahmed/ahmedashrafdevv/esolveeg/projects/bookstore_system/client/systemfinal/src/classes/Form.js"],"names":["Errors","http","Form","data","originalData","field","errors","isLoading","clear","url","submit","property","requestType","Promise","resolve","reject","then","response","onSuccess","catch","error","onFail","reset","record","general"],"mappings":";;;AAAA,OAAOA,MAAP;AACA,OAAOC,IAAP;;IAEqBC,I;;;AACnB,gBAAYC,IAAZ,EAAkB;AAAA;;AAChB,SAAKC,YAAL,GAAoBD,IAApB;;AACA,SAAK,IAAIE,KAAT,IAAkBF,IAAlB,EAAwB;AACtB,WAAKE,KAAL,IAAcF,IAAI,CAACE,KAAD,CAAlB;AACD;;AAED,SAAKC,MAAL,GAAc,IAAIN,MAAJ,EAAd;AACA,SAAKO,SAAL,GAAiB,KAAjB;AACD;;;;+BACU,CACT;AACD;;;4BACO;AACN,WAAK,IAAIF,KAAT,IAAkB,KAAKD,YAAvB,EAAqC;AACnC,aAAKC,KAAL,IAAc,EAAd;AACD;;AAED,WAAKC,MAAL,CAAYE,KAAZ;AACD;;;yBAEIC,G,EAAK;AACR,aAAO,KAAKC,MAAL,CAAY,MAAZ,EAAoBD,GAApB,CAAP;AACD;;;wBAEGA,G,EAAK;AACP,aAAO,KAAKC,MAAL,CAAY,KAAZ,EAAmBD,GAAnB,CAAP;AACD;;;0BAEKA,G,EAAK;AACT,aAAO,KAAKC,MAAL,CAAY,OAAZ,EAAqBD,GAArB,CAAP;AACD;;;4BAEMA,G,EAAK;AACV,aAAO,KAAKC,MAAL,CAAY,QAAZ,EAAsBD,GAAtB,CAAP;AACD;;;wBAEGA,G,EAAK;AACP,aAAO,KAAKC,MAAL,CAAY,KAAZ,EAAmBD,GAAnB,CAAP;AACD;;;2BAEM;AACL,UAAIN,IAAI,GAAG,EAAX;;AACA,WAAK,IAAIQ,QAAT,IAAqB,KAAKP,YAA1B,EAAwC;AACtCD,QAAAA,IAAI,CAACQ,QAAD,CAAJ,GAAiB,KAAKA,QAAL,CAAjB;AACD;;AACD,aAAOR,IAAP;AACD;;;2BAEMS,W,EAAaH,G,EAAK;AAAA;;AACvB,aAAO,IAAII,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAA,KAAI,CAACR,SAAL,GAAiB,IAAjB;AAEAN,QAAAA,IAAI,CAACW,WAAD,CAAJ,CAAkBH,GAAlB,EAAuB,KAAI,CAACN,IAAL,EAAvB,EACGa,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChB,UAAA,KAAI,CAACC,SAAL;;AACAJ,UAAAA,OAAO,CAACG,QAAQ,CAACd,IAAV,CAAP;AACD,SAJH,EAKGgB,KALH,CAKS,UAAAC,KAAK,EAAI;AACd,UAAA,KAAI,CAACC,MAAL,CAAYD,KAAK,CAACH,QAAN,CAAed,IAA3B;;AACAY,UAAAA,MAAM,CAACK,KAAD,CAAN;AACD,SARH;AASD,OAZM,CAAP;AAaD;;;gCAEW;AACV,WAAKE,KAAL,GADU,CAEV;AACA;AACD;;;2BAEMF,K,EAAO;AACZ,UAAIA,KAAK,CAAC,CAAC,QAAD,CAAD,CAAT,EAAuB;AACrB;AACA;AACA;AACA;AACD;;AACD,WAAKd,MAAL,CAAYiB,MAAZ,CAAmB;AAAEC,QAAAA,OAAO,EAAEJ,KAAK,CAAC,CAAC,SAAD,CAAD;AAAhB,OAAnB;AACA,WAAKb,SAAL,GAAiB,KAAjB;AACD;;;;;;SAhFkBL,I","sourcesContent":["import Errors from \"./Errors\";\nimport http from \"../axios/index\";\n\nexport default class Form {\n  constructor(data) {\n    this.originalData = data;\n    for (let field in data) {\n      this[field] = data[field];\n    }\n\n    this.errors = new Errors();\n    this.isLoading = false;\n  }\n  validate() {\n    // console.log(this.validation)\n  }\n  reset() {\n    for (let field in this.originalData) {\n      this[field] = \"\";\n    }\n\n    this.errors.clear();\n  }\n\n  post(url) {\n    return this.submit(\"post\", url);\n  }\n\n  get(url) {\n    return this.submit(\"get\", url);\n  }\n\n  patch(url) {\n    return this.submit(\"patch\", url);\n  }\n\n  delete(url) {\n    return this.submit(\"delete\", url);\n  }\n\n  put(url) {\n    return this.submit(\"put\", url);\n  }\n\n  data() {\n    let data = {};\n    for (let property in this.originalData) {\n      data[property] = this[property];\n    }\n    return data;\n  }\n\n  submit(requestType, url) {\n    return new Promise((resolve, reject) => {\n      this.isLoading = true;\n\n      http[requestType](url, this.data())\n        .then(response => {\n          this.onSuccess();\n          resolve(response.data);\n        })\n        .catch(error => {\n          this.onFail(error.response.data);\n          reject(error);\n        });\n    });\n  }\n\n  onSuccess() {\n    this.reset();\n    // this.isLoading = false;\n    // this.isLoading(false)\n  }\n\n  onFail(error) {\n    if (error[[\"errors\"]]) {\n      // console.log(error[['error']])\n      // this.errors.record(error[[\"errors\"]]);\n      // this.isLoading = false;\n      return;\n    }\n    this.errors.record({ general: error[[\"message\"]] });\n    this.isLoading = false;\n  }\n}\n"]}]}