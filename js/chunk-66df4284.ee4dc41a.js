(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66df4284"],{a62b:function(e,t,s){},e58d:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row"},[s("Breadcrumbs",{attrs:{title:e.title,path:e.path,fregment:e.fregment}}),s("div",{staticClass:"col s12 mt-65"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"col s12 m12 l12"},[s("h5",{staticClass:"form-title"},[s("i",{staticClass:"material-icons app-header-icon text-top"},[e._v("perm_identity")]),e._v(" "+e._s(e.$t(e.title,{fregment:e.fregment}))+" ")]),s("div",{staticClass:"card animated  fadeInLeft "},[s("div",{staticClass:"card-content"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.submitted()}}},[e.validationError?s("div",{staticClass:"card-alert danger card"},[s("div",{staticClass:"card-content"},[s("p",[s("i",{staticClass:"material-icons"},[e._v("error")]),e._v(e._s(e.validationError)+" ")])])]):e._e(),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12",class:{error:e.validation.hasError("name")}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{id:"name",type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),s("label",{class:e.name?"active":"",attrs:{for:"name"}},[e._v(e._s(e.$t("name")))]),s("div",{staticClass:"message"},[e._v(" "+e._s(e.validation.firstError("name"))+" ")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12",class:{error:e.validation.hasError("description")}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"materialize-textarea",attrs:{id:"description"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),s("label",{class:e.description?"active":"",attrs:{for:"description"}},[e._v(e._s(e.$t("description")))]),s("div",{staticClass:"message"},[e._v(" "+e._s(e.validation.firstError("description"))+" ")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12",class:{error:e.validation.hasError("users")}},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.users,expression:"users"}],attrs:{id:"users",multiple:""},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.users=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",disabled:"none"}},[e._v(e._s(e.$t("select_user")))]),e._l(e.allUsers,(function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2),s("label",{class:e.users?"active":"",attrs:{for:"users"}},[e._v(e._s(e.$t("users")))]),s("div",{staticClass:"message"},[e._v(" "+e._s(e.validation.firstError("users"))+" ")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12",class:{error:e.validation.hasError("permissions")}},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.permissions,expression:"permissions"}],attrs:{id:"permissions",multiple:""},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.permissions=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",disabled:"none"}},[e._v(e._s(e.$t("select_permission")))]),e._l(e.allPermissions,(function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2),s("label",{class:e.permissions?"active":"",attrs:{for:"permissions"}},[e._v(e._s(e.$t("permissions")))]),s("div",{staticClass:"message"},[e._v(" "+e._s(e.validation.firstError("permissions"))+" ")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("button",{staticClass:"btn create cyan waves-effect waves-light left",attrs:{type:"submit",name:"action",disabled:"disabled"}},[e._v(" "+e._s(e.$t("save"))+" "),s("i",{staticClass:"material-icons right"},[e._v("send")])])])])])])])])])])])],1)},a=[],r=(s("a4d3"),s("e01a"),s("4160"),s("b0c0"),s("e25e"),s("ac1f"),s("5319"),s("159b"),s("9a2e")),n=s("85f2"),o=s("4d5c"),l=s.n(o),c=s("95b1"),u=s.n(c),d=s("f2b3"),m=s("9530"),v=s.n(m);function p(){var e=Object(r["a"])(["\n          query {\n            allPermissions {\n              name\n              id\n            }\n          }\n        "]);return p=function(){return e},e}function f(){var e=Object(r["a"])(["\n          query {\n            allUsers {\n              name\n              id\n            }\n          }\n        "]);return f=function(){return e},e}var h=u.a.Validator,_={name:"edit-add-roles",components:{Breadcrumbs:n["a"]},data:function(){return{path:[{title:"roles",route:"roles.index"}],roleById:{},name:"",slug:"",description:"",allUsers:"",allPermissions:[],users:[],permissions:[],title:"create_role",validationError:"",fregment:""}},validators:{name:function(e){return h.value(e).required().minLength(3)},users:function(e){return h.value(e)},permissions:function(e){return h.value(e).required()},description:function(e){return h.value(e).minLength(3)}},apollo:{roleById:function(){return{query:d["db"],variables:function(){return{id:parseInt(this.$route.params.id)}},result:function(e){var t=e.data.roleById;this.name=t.name,this.description=t.description,this.slug=t.slug,this.title="edit";var s=[];t.users.forEach((function(e){s.push(e.id)}));var i=[];t.permissions.forEach((function(e){i.push(e.id)})),this.users=s,this.permissions=i}}},allUsers:function(){return{query:v()(f())}},allPermissions:function(){return{query:v()(p())}}},watch:{"validation.errors":function(){var e=document.querySelector(".input-field button");this.validation.errors.length>0?e.setAttribute("disabled","disabled"):this.role?e.removeAttribute("disabled"):this.validation.touchedRecords.length>1&&e.removeAttribute("disabled")},name:function(){var e=this.name.replace(" ","-");e=e.replace("&","-"),e=e.replace("?","-"),e=e.replace("/","-"),e=e.replace("\\","-"),this.slug=e}},methods:{submitted:function(){this.roleById?this.updateRole():this.createRole()},loadSelects:function(){var e=document.querySelectorAll("select");setTimeout((function(){l.a.FormSelect.init(e,{})}),3e3)},updateRole:function(){var e=this;this.$apollo.mutate({mutation:d["rb"],variables:{name:this.name,slug:this.slug,id:parseInt(this.$route.params.id),description:this.description,users:this.users,permissions:this.permissions}}).then((function(t){l.a.toast({html:"".concat(e.$t("updated_successfully",{name:t.data.updateRole.name})),classes:"success toast",displayLength:2e3}),e.roleById.name=e.name,e.roleById.slug=e.slug,e.roleById.description=e.description,e.roleById.users=e.users,e.roleById.permissions=e.permissions,e.$router.push({name:"roles.index"})})).catch((function(){e.validationError=e.$t("name_unique")}))},createRole:function(){var e=this;this.$apollo.mutate({mutation:d["p"],variables:{name:this.name,slug:this.slug,description:this.description,users:this.users,permissions:this.permissions}}).then((function(t){l.a.toast({html:"".concat(e.$t("created_successfully",{name:t.data.createRole.name})),classes:"success toast",displayLength:3e3}),e.$router.push({name:"roles.index"})})).catch((function(){e.validationError=e.$t("name_unique")}))}},mounted:function(){this.loadSelects()}},b=_,g=(s("eac5"),s("2877")),y=Object(g["a"])(b,i,a,!1,null,"ee96075a",null);t["default"]=y.exports},eac5:function(e,t,s){"use strict";var i=s("a62b"),a=s.n(i);a.a}}]);
//# sourceMappingURL=chunk-66df4284.ee4dc41a.js.map