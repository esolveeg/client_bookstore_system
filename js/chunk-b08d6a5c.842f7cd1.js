(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b08d6a5c"],{"9a25":function(t,e,s){},bbf0:function(t,e,s){"use strict";var i=s("9a25"),a=s.n(i);a.a},c09d:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("Breadcrumbs",{attrs:{title:t.title,path:t.path,fregment:t.fregment}}),s("div",{staticClass:"col s12 mt-65"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"col s12 m12 l12"},[s("h5",{staticClass:"form-title"},[s("i",{staticClass:"material-icons app-header-icon text-top"},[t._v("perm_identity")]),t._v(" "+t._s(t.$t(t.title,{fregment:t.fregment}))+" ")]),s("div",{staticClass:"card animated  fadeInLeft "},[s("div",{staticClass:"card-content"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.submitted()}}},[t.validationError?s("div",{staticClass:"card-alert danger card"},[s("div",{staticClass:"card-content"},[s("p",[s("i",{staticClass:"material-icons"},[t._v("error")]),t._v(t._s(t.validationError)+" ")])])]):t._e(),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("name")}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"name",type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),s("label",{class:t.name?"active":"",attrs:{for:"name"}},[t._v(t._s(t.$t("name")))]),s("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("name"))+" ")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("description")}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"materialize-textarea",attrs:{id:"description"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),s("label",{class:t.description?"active":"",attrs:{for:"description"}},[t._v(t._s(t.$t("description")))]),s("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("description"))+" ")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("users")}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.users,expression:"users"}],attrs:{id:"users",multiple:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.users=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",disabled:"none"}},[t._v(t._s(t.$t("select_user")))]),t._l(t.allUsers,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2),s("label",{class:t.users?"active":"",attrs:{for:"users"}},[t._v(t._s(t.$t("users")))]),s("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("users"))+" ")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("permissions")}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.permissions,expression:"permissions"}],attrs:{id:"permissions",multiple:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.permissions=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",disabled:"none"}},[t._v(t._s(t.$t("select_permission")))]),t._l(t.allPermissions,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2),s("label",{class:t.permissions?"active":"",attrs:{for:"permissions"}},[t._v(t._s(t.$t("permissions")))]),s("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("permissions"))+" ")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("button",{staticClass:"btn create cyan waves-effect waves-light left",attrs:{type:"submit",name:"action",disabled:"disabled"}},[t._v(" "+t._s(t.$t("save"))+" "),s("i",{staticClass:"material-icons right"},[t._v("send")])])])])])])])])])])])],1)},a=[],r=(s("a4d3"),s("e01a"),s("4160"),s("b0c0"),s("e25e"),s("ac1f"),s("5319"),s("159b"),s("9a2e")),n=s("85f2"),o=s("4d5c"),l=s.n(o),c=s("95b1"),u=s.n(c),d=s("f2b3"),m=s("9530"),v=s.n(m);function p(){var t=Object(r["a"])(["\n          query {\n            allPermissions {\n              name\n              id\n            }\n          }\n        "]);return p=function(){return t},t}function f(){var t=Object(r["a"])(["\n          query {\n            allUsers {\n              name\n              id\n            }\n          }\n        "]);return f=function(){return t},t}var h=u.a.Validator,_={name:"edit-add-roles",components:{Breadcrumbs:n["a"]},data:function(){return{path:[{title:"roles",route:"roles.index"}],roleById:{},name:"",slug:"",description:"",allUsers:"",allPermissions:[],users:[],permissions:[],title:"create_role",validationError:"",fregment:""}},validators:{name:function(t){return h.value(t).required().minLength(3)},users:function(t){return h.value(t)},permissions:function(t){return h.value(t).required()},description:function(t){return h.value(t).minLength(3)}},apollo:{roleById:function(){return{query:d["db"],variables:function(){return{id:parseInt(this.$route.params.id)}},fetchPolicy:"network-only",result:function(t){var e=t.data.roleById;this.name=e.name,this.description=e.description,this.slug=e.slug,this.title="edit";var s=[];e.users.forEach((function(t){s.push(t.id)}));var i=[];e.permissions.forEach((function(t){i.push(t.id)})),this.users=s,this.permissions=i}}},allUsers:function(){return{query:v()(f())}},allPermissions:function(){return{query:v()(p())}}},watch:{"validation.errors":function(){var t=document.querySelector(".input-field button");this.validation.errors.length>0?t.setAttribute("disabled","disabled"):this.role?t.removeAttribute("disabled"):this.validation.touchedRecords.length>1&&t.removeAttribute("disabled")},name:function(){var t=this.name.replace(" ","-");t=t.replace("&","-"),t=t.replace("?","-"),t=t.replace("/","-"),t=t.replace("\\","-"),this.slug=t}},methods:{submitted:function(){this.roleById?this.updateRole():this.createRole()},loadSelects:function(){var t=document.querySelectorAll("select");setTimeout((function(){l.a.FormSelect.init(t,{})}),2e3)},updateRole:function(){var t=this;this.$apollo.mutate({mutation:d["rb"],variables:{name:this.name,slug:this.slug,id:parseInt(this.$route.params.id),description:this.description,users:this.users,permissions:this.permissions}}).then((function(e){l.a.toast({html:"".concat(t.$t("updated_successfully",{name:e.data.updateRole.name})),classes:"success toast",displayLength:2e3}),t.$router.push({name:"roles.index"})})).catch((function(){t.validationError=t.$t("name_unique")}))},createRole:function(){var t=this;this.$apollo.mutate({mutation:d["p"],variables:{name:this.name,slug:this.slug,description:this.description,users:this.users,permissions:this.permissions}}).then((function(e){l.a.toast({html:"".concat(t.$t("created_successfully",{name:e.data.createRole.name})),classes:"success toast",displayLength:3e3}),t.$router.push({name:"roles.index"})})).catch((function(){t.validationError=t.$t("name_unique")}))}},mounted:function(){this.loadSelects()}},b=_,g=(s("bbf0"),s("2877")),C=Object(g["a"])(b,i,a,!1,null,"39354ed8",null);e["default"]=C.exports}}]);
//# sourceMappingURL=chunk-b08d6a5c.842f7cd1.js.map