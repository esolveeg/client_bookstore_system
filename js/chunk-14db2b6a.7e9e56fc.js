(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14db2b6a"],{"344e":function(t,e,s){"use strict";var i=s("4599"),a=s.n(i);a.a},4599:function(t,e,s){},"65ca":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"printTable",staticStyle:{padding:"2mm",margin:"0 auto",width:"430px",background:"#FFF","font-family":"'Muli', sans-serif"},attrs:{id:"invoice-POS"}},[t._m(0),s("div",{staticStyle:{"min-height":"80px","border-bottom":"1px solid #EEE"},attrs:{id:"mid"}},[t._m(1),s("div",{staticClass:"info",staticStyle:{display:"block","margin-left":"0"}},[s("p",{staticStyle:{"font-size":"1.2em",color:"#000","line-height":"1.2em"}},[t._v(" Invoice no : #"+t._s(this.id)),s("br")])])]),s("div",{staticStyle:{"min-height":"50px","border-bottom":"1px solid #EEE"},attrs:{id:"bot"}},[s("div",{attrs:{id:"table"}},[s("table",{staticStyle:{width:"100%","border-collapse":"collapse"}},[t._m(2),t._l(t.products,(function(e,i){return s("tr",{key:i,staticClass:"service",staticStyle:{"border-bottom":"1px solid #EEE"}},[s("td",{staticClass:"tableitem",staticStyle:{padding:"5px 0 5px 15px",border:"1px solid #EEE"}},[s("p",{staticClass:"itemtext",staticStyle:{"font-size":".9em",color:"#000","line-height":"1.2em"}},[t._v(" "+t._s(e.name)+" ")])]),s("td",{staticClass:"tableitem",staticStyle:{padding:"5px 0 5px 15px",border:"1px solid #EEE"}},[s("p",{staticClass:"itemtext",staticStyle:{"font-size":".9em",color:"#000","line-height":"1.2em"}},[t._v(" "+t._s(t.qtys[i])+" ")])]),s("td",{staticClass:"tableitem",staticStyle:{padding:"5px 0 5px 15px",border:"1px solid #EEE"}},[s("p",{staticClass:"itemtext",staticStyle:{"font-size":".9em",color:"#000","line-height":"1.2em"}},[t._v(" EGP"+t._s(e.price)+" ")])]),s("td",{staticClass:"tableitem",staticStyle:{padding:"5px 0 5px 15px",border:"1px solid #EEE"}},[s("p",{staticClass:"itemtext",staticStyle:{"font-size":".9em",color:"#000","line-height":"1.2em"}},[t._v(" EGP"+t._s(e.price*t.qtys[i])+" ")])])])})),s("tr",{staticClass:"tabletitle"},[s("td"),s("td"),t._m(3),s("td",{staticClass:"payment",staticStyle:{padding:"5px 0 5px 15px",border:"1px solid #EEE"}},[s("h4",{staticStyle:{"text-align":"left"}},[t._v("EGP"+t._s(t.total))])])]),t.discount?s("tr",{staticClass:"tabletitle"},[s("td"),s("td"),"percent"==t.discountType?s("td",{staticClass:"Rate",staticStyle:{padding:"5px 0 5px 15px",border:"1px solid #EEE"}},[s("h4",{staticStyle:{"text-align":"left"}},[t._v(" "+t._s(t.$t("discountPercent",{percent:t.discount}))+" ")])]):s("td",{staticClass:"Rate",staticStyle:{border:"1px solid #EEE"}},[s("h4",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.$t("discount"))+":")])]),s("td",{staticClass:"payment",staticStyle:{padding:"5px 0 5px 15px",border:"1px solid #EEE"}},[s("h2",[t._v("EGP"+t._s(parseInt(t.discountValue))+":")])])]):t._e(),t.discountValue?s("tr",{staticClass:"tabletitle"},[s("td"),s("td"),t._m(4),s("td",{staticClass:"payment",staticStyle:{padding:"5px 0 5px 15px",border:"1px solid #EEE"}},[s("h2",[t._v("EGP"+t._s(parseInt(t.total-t.discountValue)))])])]):s("tr",{staticClass:"tabletitle"},[s("td"),s("td"),t._m(5),s("td",{staticClass:"payment",staticStyle:{padding:"5px 0 5px 15px",border:"1px solid #EEE"}},[s("h2",[t._v("EGP"+t._s(t.total))])])])],2)]),t._m(6)])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"tex-align":"center","min-height":"100px","border-bottom":"1px solid #EEE"},attrs:{id:"top"}},[s("div",{staticClass:"logo",staticStyle:{"text-align":"center"}},[s("img",{staticStyle:{width:"120px",height:"auto"},attrs:{src:"http://readerscorner.co/storage/settings/May2019/S3fivD7C4Y2oXfnGaEsa.png"}})]),s("div",{staticClass:"info"},[s("h2",{staticStyle:{"text-align":"center","font-size":"2em","font-weight":"300","line-height":"2em",color:"#000"}},[t._v(" READERSCORNER ")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"info",staticStyle:{display:"block","margin-left":"0"}},[s("h2",{staticStyle:{"font-size":"2em","font-weight":"300","line-height":"2em",color:"#000"}},[t._v(" Contact Info ")]),s("p",{staticStyle:{"font-size":"1.2em",color:"#000","line-height":"1.2em"}},[t._v(" Email : info@readerscorner.co"),s("br")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{staticClass:"tabletitle",staticStyle:{padding:"5px","font-size":".9em"}},[s("td",{staticClass:"item",staticStyle:{padding:"5px 0 5px 15px",width:"24mm",border:"1px solid #EEE"}},[s("h2",[t._v("Item")])]),s("td",{staticClass:"Hours",staticStyle:{padding:"5px 0 5px 15px",border:"1px solid #EEE"}},[s("h2",[t._v("Qty")])]),s("td",{staticClass:"Rate",staticStyle:{padding:"5px 0 5px 15px",border:"1px solid #EEE"}},[s("h2",[t._v("price")])]),s("td",{staticClass:"Rate",staticStyle:{padding:"5px 0 5px 15px",border:"1px solid #EEE"}},[s("h2",[t._v("total")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[s("h4",{staticStyle:{"text-align":"left",border:"1px solid #EEE"}},[t._v("subtotal:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticStyle:{border:"1px solid #EEE"}},[s("h4",{staticStyle:{"text-align":"left"}},[t._v("Total:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticStyle:{border:"1px solid #EEE"}},[s("h4",[t._v("Total")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"text-align":"center"},attrs:{id:"legalcopy"}},[s("p",{staticClass:"legal",staticStyle:{"font-size":"1.2em",color:"#000","line-height":"1.2em"}},[s("strong",[t._v("Thank you for your purchase!")]),t._v(" "),s("br"),t._v(" you can make more further purchases from our website"),s("br"),s("strong",[t._v(" Readerscorner.co. ")])])])}],r={name:"resete",props:["products","qtys","id","tota","discountValue","discount","discountType","total"]},o=r,n=s("2877"),c=Object(n["a"])(o,i,a,!1,null,"36da5a5c",null);e["a"]=c.exports},c5fb:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("Breadcrumbs",{attrs:{title:t.title,path:t.path,fregment:t.fregment}}),s("div",{staticClass:"col s12 mt-65"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"col s12 m12 l12"},[s("h5",{staticClass:"form-title"},[s("i",{staticClass:"material-icons app-header-icon text-top"},[t._v("perm_identity")]),t._v(" "+t._s(t.$t(t.title,{fregment:t.fregment}))+" ")]),s("div",{staticClass:"card animated  fadeInLeft "},[s("div",{staticClass:"card-content"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.submitted()}}},[t.validationError?s("div",{staticClass:"card-alert danger card"},[s("div",{staticClass:"card-content"},[s("p",[s("i",{staticClass:"material-icons"},[t._v("error")]),t._v(t._s(t.validationError)+" ")])])]):t._e(),s("div",{staticClass:"row"},[s("div",{staticClass:"col s12 l6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("isbn")}},[s("i",{staticClass:"material-icons prefix isbn-clear",on:{click:function(e){t.isbn=""}}},[t._v("clear")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.product,expression:"product"}],staticClass:"input-isbn autocomplete",attrs:{id:"isbn",type:"text",autocomplete:"off"},domProps:{value:t.product},on:{input:function(e){e.target.composing||(t.product=e.target.value)}}}),s("label",{staticClass:"label-isbn",class:t.isbn?"active":"",attrs:{for:"isbn"}},[t._v(t._s(t.$t("product")))]),s("div",{staticClass:"message"},[this.qtyIncreased?s("span",{staticClass:"success-text"},[t._v(t._s(t.$t("qty_increased")))]):t._e(),this.productAlreadyAdded?s("span",{staticClass:"error-text"},[t._v(t._s(t.$t("poduct_already_add")))]):t._e(),this.productAdded?s("span",{staticClass:"success-text"},[t._v(t._s(t.$t("poduct_added_successfully")))]):t._e(),t._v(" "+t._s(t.validation.firstError("isbn"))+" ")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("note")}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"note"}],attrs:{id:"note",type:"text"},domProps:{value:t.note},on:{input:function(e){e.target.composing||(t.note=e.target.value)}}}),s("label",{class:t.note?"active":"",attrs:{for:"note"}},[t._v(t._s(t.$t("note")))]),s("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("note"))+" ")])])]),t.isPos?t._e():s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("branch")}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.branch,expression:"branch"}],attrs:{id:"branch"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.branch=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",disabled:"none"}},[t._v(t._s(t.$t("select_branch")))]),t._l(t.allBranches,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2),s("label",{class:t.branch?"active":"",attrs:{for:"branches"}},[t._v(t._s(t.$t("branches")))]),s("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("branch"))+" ")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("supplier")}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.supplier,expression:"supplier"}],attrs:{id:"supplier"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.supplier=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",disabled:"none"}},[t._v(t._s(t.$t("select_supplier")))]),t._l(t.allSuppliers,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2),s("label",{class:t.supplier?"active":"",attrs:{for:"supplier"}},[t._v(t._s(t.$t("suppliers")))]),s("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("supplier"))+" ")])])])]),s("div",{staticClass:"col s12 l6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("div",{staticClass:"products"},[t._v(" "+t._s(t.$t("products"))+" ")]),s("div",{staticClass:"invoice__table"},[s("table",{staticClass:"highlight responsive-table"},[s("thead",[s("tr",[s("th",{attrs:{"data-field":"no"}},[t._v(t._s(t.$t("subtotal")))]),s("th",{attrs:{"data-field":"item"}},[t._v(t._s(t.$t("item")))]),s("th",{attrs:{"data-field":"uprice"}},[t._v(" "+t._s(t.$t("unit_price"))+" ")]),s("th",{attrs:{"data-field":"price"}},[t._v(t._s(t.$t("qty")))]),s("th",{attrs:{"data-field":"price"}},[t._v(t._s(t.$t("total")))])])]),s("tbody",[t._l(t.products,(function(e,i){return s("tr",{key:i},[s("td",[t._v(t._s(i+1)+".")]),s("td",[t._v(t._s(e.name))]),s("td",[t._v("EGP"+t._s(e.purchased_price))]),s("td",[s("div",{staticClass:"counter"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.qtys[i],expression:"qtys[index]"}],staticClass:"border-none w2",domProps:{value:t.qtys[i]},on:{input:function(e){e.target.composing||t.$set(t.qtys,i,e.target.value)}}})])]),s("td",[t._v(" EGP"+t._s(e.purchased_price*t.qtys[i])+" ")]),s("td",[s("i",{staticClass:"material-icons",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.removeProduct(i)}}},[t._v("delete")])])])})),s("tr",{staticClass:"border-none"},[s("td",{attrs:{colspan:"3"}}),s("td",[t._v(t._s(t.$t("subtotal"))+":")]),s("td",[t._v("EGP"+t._s(t.total))])]),s("tr",{staticClass:"border-none"},[s("td",{attrs:{colspan:"3"}}),s("td",{staticClass:"cyan white-text pl-1"},[t._v(" "+t._s(t.$t("total"))+" ")]),s("td",{staticClass:"cyan strong white-text"},[t._v(" EGP"+t._s(parseInt(t.total))+" ")])])],2)])])])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("button",{staticClass:"btn create cyan waves-effect waves-light left",attrs:{type:"submit",disabled:"disabled",name:"action"}},[t._v(" "+t._s(t.$t("save"))+" "),s("i",{staticClass:"material-icons right"},[t._v("send")])])])])])])])])])])])],1)},a=[],r=(s("4de4"),s("4160"),s("caad"),s("c975"),s("b0c0"),s("e25e"),s("2532"),s("159b"),s("85f2")),o=s("65ca"),n=s("4d5c"),c=s.n(n),l=s("95b1"),d=s.n(l),u=s("f2b3"),p=d.a.Validator,h={components:{Breadcrumbs:r["a"],Resete:o["a"]},data:function(){return{path:[{title:"outcoming_orders",route:"outcomingorders.index"}],outcomingOrder:{},note:"",total:0,qtyIncreased:!1,isbn:"",supplier:"",product:"",productsIds:[],qtys:[],productAlreadyAdded:!1,productAdded:!1,products:[],allSuppliers:[],id:null,allBranches:[],allProducts:[],title:"create_outcoming_order",validationError:"",fregment:""}},store:{branch:"branch_id",userId:"userId",isPos:"isPos"},validators:{note:function(t){return p.value(t).maxLength(250)},total:function(t){return p.value(t).required().digit().maxLength(5)},products:function(t){return p.value(t).required()}},apollo:{outcomingOrder:function(){return{query:u["Y"],variables:function(){return{id:parseInt(this.$route.params.id)}},result:function(t){var e=this,s=t.data.outcomingOrder;this.note=s.note,this.id=s.id,this.total=s.total,this.suppler=s.suppler?s.suppler.id:"",this.branch=s.branch?s.branch.id:"",s.products.forEach((function(t){e.products.push(t),e.productsIds.push(t.id)})),s.productsPivot.forEach((function(t){e.qtys.push(t.qty)})),this.title="edit"}}},allBranches:function(){return{query:u["a"]}},allProducts:function(){return{query:u["c"],result:function(t){var e=this,s=t.data.allProducts,i=document.querySelectorAll(".autocomplete"),a=this.toObject(s),r={data:a,onAutocomplete:function(t){e.product=t}};c.a.Autocomplete.init(i,r)}}},allSuppliers:function(){return{query:u["d"]}}},watch:{"validation.errors":function(){var t=this,e=document.querySelector(".input-field button");this.validation.errors.length>0?e.setAttribute("disabled","disabled"):this.order?e.removeAttribute("disabled"):setTimeout((function(){t.validation.touchedRecords.length>1&&e.removeAttribute("disabled")}),2e3)},qtys:function(){for(var t=0,e=0;e<this.qtys.length;++e)this.products[e].qty=this.qtys[e],t+=this.products[e].purchased_price*this.products[e].qty;this.total=t},products:function(){var t=0;this.products.forEach((function(e){t+=e.purchased_price*e.qty})),this.total=t},product:function(){var t=this,e=this.allProducts.filter((function(e){return e.isbn==t.product||e.name==t.product?e:""})),s=document.querySelector(".input-field button");if(s.setAttribute("disabled","disabled"),e[0]){var i=document.querySelector(".autocomplete-content");if(i&&(i.style.opacity=0),this.productsIds.includes(e[0].id)){var a=this.productsIds.indexOf(e[0].id);this.productAlreadyAdded=!1,this.qtyIncreased=!0,this.productAdded=!1,this.qtys[a]=this.qtys[a]+1,setTimeout((function(){t.qtyIncreased=!1,t.product=""}),1e3)}else this.qtys.push(1),this.productAdded=!0,e[0].qty=this.qtys[this.qtys.length-1],this.products.push(e[0]),this.productsIds.push(e[0].id),setTimeout((function(){t.productAdded=!1}),3e3),this.product="";setTimeout((function(){t.validation.touchedRecords.length>1&&s.removeAttribute("disabled")}),4e3)}}},methods:{removeProduct:function(t){var e=this;this.products=this.products.filter((function(s){return s!==e.products[t]?s:""})),this.productsIds=this.productsIds.filter((function(s){return s!==e.productsIds[t]?s:""})),this.qtys=this.qtys.filter((function(s){return s!==e.qtys[t]?s:""}))},increaseQty:function(t){this.qtys[t]=this.qtys[t]+1,this.qtys=this.qtys},decreaseQty:function(t){this.qtys[t]=this.qtys[t]-1},toObject:function(t){for(var e={},s=0;s<t.length;++s)void 0!==t[s]&&(e[t[s].name]=null),void 0!==t[s]&&(e[t[s].isbn]=null);return e},loadSelects:function(){var t=document.querySelectorAll("select");setTimeout((function(){c.a.FormSelect.init(t,{})}),2e3)},submitted:function(){this.outcomingOrder?this.updateOrder():this.createOrder()},updateOrder:function(){var t=this;this.$apollo.mutate({mutation:u["pb"],variables:{outcomingOrder:parseInt(this.$route.params.id),qtys:this.qtys,branch:this.branch,products:this.productsIds}}),setTimeout((function(){t.$apollo.mutate({mutation:u["ob"],variables:{id:parseInt(t.$route.params.id),updated_by:parseInt(t.userId),note:t.note,total:parseInt(t.total),supplier:t.suppler,branch:t.branch}}).then((function(){c.a.toast({html:"".concat(t.$t("updated_successfully",{name:t.$t("outcoming_order")})),classes:"success toast",displayLength:2e3}),t.$router.push({name:"outcomingorders.index"})}))}),1e3)},createOrder:function(){var t=this;this.$apollo.mutate({mutation:u["m"],variables:{created_by:parseInt(this.userId),note:this.note,total:parseInt(this.total),supplier:this.supplier,branch:this.branch}}).then((function(e){t.id=e.data.createOutcomingOrder.id,c.a.toast({html:"".concat(t.$t("created_successfully",{name:t.$t("outcoming_order")})),classes:"success toast",displayLength:3e3}),t.$router.push({name:"outcomingorders.index"})})).catch((function(){t.validationError=t.$t("name_unique")})),setTimeout((function(){t.$apollo.mutate({mutation:u["n"],variables:{outcomingOrder:t.id,qtys:t.qtys,created_by:t.userId,branch:t.branch,products:t.productsIds}})}),2e3)}},mounted:function(){this.loadSelects()}},v={name:"edit-add-roles",mixins:[h]},m=v,f=(s("344e"),s("2877")),_=Object(f["a"])(m,i,a,!1,null,"28e27577",null);e["default"]=_.exports},c975:function(t,e,s){"use strict";var i=s("23e7"),a=s("4d64").indexOf,r=s("b301"),o=[].indexOf,n=!!o&&1/[1].indexOf(1,-0)<0,c=r("indexOf");i({target:"Array",proto:!0,forced:n||c},{indexOf:function(t){return n?o.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-14db2b6a.7e9e56fc.js.map