(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2df53e6a"],{"59f4":function(t,s,e){},"8a70":function(t,s,e){"use strict";var i=e("59f4"),a=e.n(i);a.a},c975:function(t,s,e){"use strict";var i=e("23e7"),a=e("4d64").indexOf,r=e("b301"),c=[].indexOf,d=!!c&&1/[1].indexOf(1,-0)<0,n=r("indexOf");i({target:"Array",proto:!0,forced:d||n},{indexOf:function(t){return d?c.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},e49c:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row"},[e("Breadcrumbs",{attrs:{title:t.title,path:t.path,fregment:t.fregment}}),e("div",{staticClass:"col s12 mt-65"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row mt-4"},[e("div",{staticClass:"col s12 m12 l12"},[e("h5",{staticClass:"form-title"},[e("i",{staticClass:"material-icons app-header-icon text-top"},[t._v("perm_identity")]),t._v(" "+t._s(t.$t(t.title,{fregment:t.fregment}))+" ")]),e("div",{staticClass:"card animated  fadeInLeft "},[e("div",{staticClass:"card-content"},[e("form",{on:{submit:function(s){return s.preventDefault(),t.submitted()}}},[t.validationError?e("div",{staticClass:"card-alert danger card"},[e("div",{staticClass:"card-content"},[e("p",[e("i",{staticClass:"material-icons"},[t._v("error")]),t._v(t._s(t.validationError)+" ")])])]):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col s12 l6"},[e("div",{staticClass:"row"},[e("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("isbn")}},[e("i",{staticClass:"material-icons prefix isbn-clear active",on:{click:function(s){t.isbn=""}}},[t._v("clear")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.product,expression:"product"}],staticClass:"input-isbn autocomplete",attrs:{id:"isbn",type:"text",autocomplete:"off",autofocus:""},domProps:{value:t.product},on:{input:function(s){s.target.composing||(t.product=s.target.value)}}}),e("label",{staticClass:"label-isbn active",class:t.isbn?"active":"",attrs:{for:"isbn"}},[t._v(t._s(t.$t("product")))]),e("div",{staticClass:"message"},[this.qtyIncreased?e("span",{staticClass:"success-text"},[t._v(t._s(t.$t("qty_increased")))]):t._e(),this.productAlreadyAdded?e("span",{staticClass:"error-text"},[t._v(t._s(t.$t("poduct_already_add")))]):t._e(),this.productAdded?e("span",{staticClass:"success-text"},[t._v(t._s(t.$t("poduct_added_successfully")))]):t._e(),t._v(" "+t._s(t.validation.firstError("isbn"))+" ")])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"input-field col s12",class:{error:t.validation.hasError("branch")}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.branch,expression:"branch"}],attrs:{id:"branch"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.branch=s.target.multiple?e:e[0]}}},[e("option",{attrs:{value:"",disabled:"none"}},[t._v(t._s(t.$t("select_branch")))]),t._l(t.allBranches,(function(s){return e("option",{key:s.id,domProps:{value:s.id}},[t._v(t._s(s.name))])}))],2),e("label",{class:t.branch?"active":"",attrs:{for:"branches"}},[t._v(t._s(t.$t("branches")))]),e("div",{staticClass:"message"},[t._v(" "+t._s(t.validation.firstError("branch"))+" ")])])])]),e("div",{staticClass:"col s12 l6"},[e("div",{staticClass:"row"},[e("div",{staticClass:"input-field col s12"},[e("div",{staticClass:"products"},[t._v(" "+t._s(t.$t("products"))+" ")]),e("div",{staticClass:"invoice__table"},[e("table",{staticClass:"highlight responsive-table"},[e("thead",[e("tr",[e("th",{attrs:{"data-field":"no"}},[t._v(t._s(t.$t("no")))]),e("th",{attrs:{"data-field":"item"}},[t._v(t._s(t.$t("item")))]),e("th",{attrs:{"data-field":"item"}},[t._v(t._s(t.$t("price")))]),e("th",{attrs:{"data-field":"item"}},[t._v(" "+t._s(t.$t("purchased_price"))+" ")]),e("th",{attrs:{"data-field":"price"}},[t._v(t._s(t.$t("qty")))])])]),e("tbody",t._l(t.products,(function(s,i){return e("tr",{key:i},[e("td",[t._v(t._s(i+1)+".")]),e("td",[t._v(t._s(s.name))]),e("td",[t._v(t._s(s.price))]),e("td",[t._v(t._s(s.purchased_price))]),e("td",[e("div",{staticClass:"counter"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.qtys[i],expression:"qtys[index]"}],staticClass:"border-none w2",domProps:{value:t.qtys[i]},on:{input:function(s){s.target.composing||t.$set(t.qtys,i,s.target.value)}}})])]),e("td",[e("i",{staticClass:"material-icons",staticStyle:{cursor:"pointer"},on:{click:function(s){return t.removeProduct(i)}}},[t._v("delete")])])])})),0)])])])])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"input-field col s12"},[e("button",{staticClass:"btn create cyan waves-effect waves-light left",attrs:{type:"submit",disabled:"disabled",name:"action"}},[t._v(" "+t._s(t.$t("save"))+" "),e("i",{staticClass:"material-icons right"},[t._v("send")])])])])])])])])])])])],1)},a=[],r=(e("4de4"),e("caad"),e("c975"),e("b0c0"),e("2532"),e("85f2")),c=e("4d5c"),d=e.n(c),n=e("95b1"),o=e.n(n),l=e("f2b3"),u=o.a.Validator,p={components:{Breadcrumbs:r["a"]},data:function(){return{path:[{title:"products",route:"products.index"}],qtyIncreased:!1,isbn:"",product:"",productsIds:[],qtys:[],newQtys:[],names:[],isbns:[],prices:[],purchased_prices:[],productAlreadyAdded:!1,productAdded:!1,products:[],id:null,branch:"",allBranches:[],allProducts:[],title:"create_product",validationError:"",fregment:""}},validators:{products:function(t){return u.value(t).required()}},apollo:{allBranches:function(){return{query:l["a"]}},allProducts:function(){return{query:l["c"],result:function(t){var s=this,e=t.data.allProducts,i=document.querySelectorAll(".autocomplete"),a=this.toObject(e),r={data:a,onAutocomplete:function(t){s.product=t}};d.a.Autocomplete.init(i,r)}}}},watch:{"validation.errors":function(){var t=this,s=document.querySelector(".input-field button");this.validation.errors.length>0?s.setAttribute("disabled","disabled"):this.order?s.removeAttribute("disabled"):setTimeout((function(){t.validation.touchedRecords.length>1&&s.removeAttribute("disabled")}),2e3)},discount:function(){"value"==this.discountType?this.discountValue=this.discount:"percent"==this.discountType&&(this.discountValue=this.total*this.discount/100)},product:function(){var t=this,s=this.allProducts.filter((function(s){return s.isbn==t.product||s.name==t.product?s:""})),e=document.querySelector(".input-field button");if(e.setAttribute("disabled","disabled"),s[0]){var i=document.querySelector(".autocomplete-content");if(i&&(i.style.opacity=0),this.productsIds.includes(s[0].id)){var a=this.productsIds.indexOf(s[0].id);this.productAlreadyAdded=!1,this.qtyIncreased=!0,this.productAdded=!1,this.qtys[a]=this.qtys[a]+1,setTimeout((function(){t.qtyIncreased=!1,t.product=""}),1e3)}else this.qtys.push(1),this.productAdded=!0,s[0].qty=this.qtys[this.qtys.length-1],this.products.push(s[0]),this.productsIds.push(s[0].id),setTimeout((function(){t.productAdded=!1}),3e3),this.product="";setTimeout((function(){t.validation.touchedRecords.length>1&&e.removeAttribute("disabled")}),4e3)}}},methods:{removeProduct:function(t){var s=this;this.products=this.products.filter((function(e){return e!==s.products[t]?e:""})),this.qtys=this.qtys.filter((function(e){return e!==s.qtys[t]?e:""})),this.productsIds=this.productsIds.filter((function(e){return e!==s.productsIds[t]?e:""}))},resetForm:function(){this.isbn="",this.product="",this.branch="",this.productsIds=[],this.qtys=[],this.productAlreadyAdded=!1,this.productAdded=!1,this.products=[],this.loadSelects()},increaseQty:function(t){this.qtys[t]=this.qtys[t]+1,this.qtys=this.qtys},decreaseQty:function(t){this.qtys[t]=this.qtys[t]-1},toObject:function(t){for(var s={},e=0;e<t.length;++e)void 0!==t[e]&&(s[t[e].name]=null),void 0!==t[e]&&(s[t[e].isbn]=null);return s},loadSelects:function(){var t=document.querySelectorAll("select");setTimeout((function(){d.a.FormSelect.init(t,{})}),2e3)},submitted:function(){this.createMultiProducts()}},mounted:function(){var t=this;this.loadSelects(),document.addEventListener("keydown",(function(s){if(s.isComposing||9===s.keyCode||13===s.keyCode)return t.submitted()}))}},v=p,h=(e("8a70"),e("2877")),f=Object(h["a"])(v,i,a,!1,null,"0d930849",null);s["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2df53e6a.31fdc655.js.map